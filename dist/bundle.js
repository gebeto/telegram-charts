!function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist/",n(n.s=2)}([function(t,e,n){t.exports=n.p+"arrow.svg"},function(t,e,n){t.exports=n.p+"check.svg"},function(t,e,n){"use strict";n.r(e);var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=window.devicePixelRatio,o=4*i,l=2*o,c=343*i,u=16*i,s=2*u,h=2*Math.PI,d="".concat(11*i,"px Arial"),m=40*i,f=7*i,g=43*i,v=29*i,p=v/2,y=5*i,w=1*i,x=2*i,b={background:"#FFFFFF",scrollBackground:"#E2EEF9",scrollSelector:"#C0D1E1",gridLines:"#182D3B",tooltipArrow:"#D2D5D7",zoomText:"#108BE3"},A={background:"#1B232F",scrollBackground:"#304259",scrollSelector:"#56626D",gridLines:"#FFFFFF",tooltipArrow:"#D2D5D7",zoomText:"#48AAF0"},T={THEME:b};var C,H,F=(C=[],H={time:0,add:function(t){C.push(t)},remove:function(t){var e=C.indexOf(t);e>-1&&C.splice(e,1)}},requestAnimationFrame(function t(e){H.time=e;for(var n=0;n<C.length;n++)C[n](e);requestAnimationFrame(t)}),H);function E(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Y=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onAnimation=a,this.fromValue=e,this.toValue=e,this.value=e,this.startTime=0,this.duration=n,this.delay=0}var e,n,a;return e=t,(n=[{key:"playFrom",value:function(t,e){this.value=t,this.play(e)}},{key:"play",value:function(t){this.startTime=F.time,this.toValue=t,this.fromValue=this.value}},{key:"update",value:function(){var t=this._update();return t&&this.onAnimation&&this.onAnimation(),t}},{key:"_update",value:function(){if(this.value===this.toValue)return!1;var t=(F.time-this.startTime-this.delay)/this.duration;t<0&&(t=0),t>1&&(t=1);var e=-t*(t-2);return this.value=this.fromValue+(this.toValue-this.fromValue)*e,!0}}])&&E(e.prototype,n),a&&E(e,a),t}();function M(t,e){var n=e-t,a={};function r(e){return a[e]||(a[e]=(e-t)/n),a[e]}return r.de=function(e){return e*n+t},r.data={delta:n,min:t,max:e},r}function _(t,e,n){var a=t.createAnimation(e,300),r=t.createAnimation(n-e,300);function i(t){return(t-a.value)/r.value}return i.updateDelta=function(t,e){e,a.play(t),r.play(e-t)},i}var S=function(t,e){var n;return function(){var a=arguments;n||(t.apply(this,a),n=!0,setTimeout(function(){return n=!1},e))}};function P(t){t.canvas;var e=t.canvasBounds,n=function(t){var e={},n={},a={x:0,y:0,xRaw:0,yRaw:0,newX:0,newY:0,newXRaw:0,newYRaw:0,isHolding:!1};return t.forEach(function(t){e[t]=[],n[t]=function(n,a){for(var r=0;r<e[t].length;r++)e[t][r](n,a)}}),{mouse:a,addListener:function(t,n){e[t].push(n)},dispatch:function(t,e){if(!n[t])throw Error("Unknown event");n[t](a,e)}}}(["move","enter","leave","down","up"]),a=n.mouse;function r(t){a.xRaw=t.clientX-e.left,a.yRaw=t.clientY-e.top,a.x=a.xRaw*i,a.y=a.yRaw*i,a.newXRaw=a.xRaw,a.newYRaw=a.yRaw,a.newX=a.x,a.newY=a.y,n.dispatch("down",t)}function o(t){a.newXRaw=t.clientX-e.left,a.newYRaw=t.clientY-e.top,a.newX=a.newXRaw*i,a.newY=a.newYRaw*i,n.dispatch("move",t)}function l(t){a.isHolding=!1,n.dispatch("up",t)}return document.addEventListener("mousedown",r),document.addEventListener("mousemove",o),document.addEventListener("mouseup",l),document.addEventListener("touchstart",function(t){r(t.touches[0])}),document.addEventListener("touchmove",function(t){o(t.touches[0])},{passive:!1}),document.addEventListener("touchend",l),document.addEventListener("touchcancel",l),document.addEventListener("selectstart",function(t){return!1}),{mouse:a,addListener:n.addListener}}function R(t){var e=t.config,n=(t.control,t.ctx),a=t.norm,r=t.colors,o=t.normYKey,l=((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).lineWidth||2)*i;return function(t,i,c,u,s){var h=t.key,d=t.items,m=t.opacity,f=t.scaling[o],g=m.value;if(g){g<1&&(e.shouldControlUpdate=!0);var v=d.length;n.save(),n.beginPath(),n.moveTo(i+0,c+s-f(d[0])*s);for(var p=1;p<v;p++){var y=i+a.X(p)*u,w=c+s-f(d[p])*s;n.lineTo(y,w)}n.lineWidth=l,n.strokeStyle=r[h],n.globalAlpha=g,n.lineJoin="round",n.stroke(),n.restore()}}}var k=0,X=1,L=2,U=3;function j(t){var e=t.ctx,n=t.config,a=(t.canvasBounds,t.control),r=(t.ys,t.yAxis),o=R(t,{lineWidth:1}),l=0,c=0,u=c-l,s=10*i,h=s/2,d=10*i,m=2*d,f=d/2,g=d-d/3,v=2*i,p=(d-v)/2,y=k,x=14*i,b=[a.range[0],a.range[1]],A={start:{x:0,y:0,width:0,height:0},end:{x:0,y:0,width:0,height:0}};return n.mouse.addListener("move",function(t){if(y!==k){n.shouldChartUpdate=!0,n.shouldControlUpdate=!0;var e=a.normalizeForControl(t.newX)-a.normalizeForControl(t.x),r=b[0]+e,i=b[1]+e;if(y===X)r>0?a.updateRange(r,b[1]):a.updateRange(0,b[1]);else if(y===L)i<1?a.updateRange(b[0],i):a.updateRange(b[0],1);else if(r>=0&&i<=1)a.updateRange(r,i);else if(i>1){var o=1-b[1];a.updateRange(b[0]+o,b[1]+o)}else if(r<0){var l=0-b[0];a.updateRange(b[0]+l,b[1]+l)}}}),n.mouse.addListener("down",function(t){var e=x,r=x,i=A.start,o=A.end;t.y>i.y&&t.y<i.y+i.height&&(n.shouldChartUpdate=!0,n.shouldControlUpdate=!0,b=[a.range[0],a.range[1]],t.newX>i.x-e&&t.newX<i.x+i.width&&t.newY>i.y-e&&t.newY<i.y+i.height+e?y=X:t.newX>o.x&&t.newX<o.x+o.width+r&&t.newY>o.y-r&&t.newY<o.y+o.height+r?y=L:t.newX>i.x+i.width&&t.newX<o.x&&t.newY>o.y-x&&t.newY<o.y+o.height+x&&(y=U))}),n.mouse.addListener("up",function(t){y=k}),function(t,n,i,y){var x=i,b=t;i-=m,t+=d;for(var C=0;C<r.items.length;C++)o(r.items[C],t,n+3,i,y-6);l=t+i*a.range[0],c=t+i*a.range[1],u=c-l,A.start.x=l-d,A.start.y=n,A.start.width=d,A.start.height=y,A.end.x=c,A.end.y=n,A.end.width=d,A.end.height=y,e.save(),e.globalAlpha=.6,e.fillStyle=T.THEME.scrollBackground,e.beginPath(),e.moveTo(l-1,n),e.lineTo(l-1,n+y),e.arcTo(b,n+y,b,n+y-d,f),e.arcTo(b,n,l-1,n,f),e.closePath(),e.fill(),e.beginPath(),e.moveTo(c+1,n),e.lineTo(c+1,n+y),e.arcTo(b+x,n+y,b+x,n+y-d,f),e.arcTo(b+x,n,c,n,f),e.closePath(),e.fill(),e.restore(),e.save(),e.fillStyle=T.THEME.scrollSelector,e.beginPath(),e.rect(l,n,u,w),e.rect(l,n+y-w,u,w),e.fill(),e.beginPath();var H=l;e.moveTo(H,n),e.lineTo(H,n+y),e.arcTo(H-d,n+y,H-d,n+y-d,g),e.arcTo(H-d,n,H,n,g),e.closePath(),e.fill(),e.beginPath(),e.moveTo(c,n),e.lineTo(c,n+y),e.arcTo(c+d,n+y,c+d,n+y-d,g),e.arcTo(c+d,n,c,n,g),e.closePath(),e.fill(),e.restore(),e.save(),e.beginPath(),e.fillStyle="#FFFFFF",e.rect(l-p,n+y/2-h,-v,s),e.rect(c+p,n+y/2-h,v,s),e.fill(),e.restore()}}function D(t){var e=t.canvasBounds,n=t.config,a=t.ctx,r=t.norm,l=t.colors,c=(t.ys,t.normYKey),u=2*i,s=(n.mouse.mouse,n.popup),d=r.X(1),m=0,f=0,g=0,v=0,p=0,y=d*m,w=-1,x=-1,b=!1,A=!1,C=!0,H=!1,F=S(function(t,r){if(b=A,(!(A=a.canvas===r.target||a.canvas.nextSibling.contains(r.target))&&b||"BUTTON"===r.target.tagName)&&(-1!==x&&(n.shouldChartUpdate=!0),x=-1,s.hide()),A&&r.target===a.canvas&&((A||!0===b&&!1===A)&&(w=x,t.newY>v&&t.newY<v+f&&(x=p-Math.round((m+g-t.newX)/y+1))<p&&x>=0?s.show(x-1):(x=-1,s.hide())),w!==x)){if(n.shouldChartUpdate=!0,-1!==x){var l=s.element.getBoundingClientRect(),c=(x*y+g)/i;c-l.width-o<0?C=!1:c+l.width+o>e.width/i&&(C=!0),s.element.style.left="".concat(C?c-l.width-o:c+o,"px")}w=x}},50);return n.mouse.addListener("move",function(t,e){H&&F(t,e)}),n.mouse.addListener("down",function(t,e){H=!0,F(t,e)}),n.mouse.addListener("up",function(t,e){H=!1}),function(t,e,n,i,s){m=i,f=s,g=e,v=n;var w=t.key,b=t.items,A=t.opacity,C=t.scaling[c],H=A.value;if(H&&(p=b.length,y=d*i,x>-1&&x<p)){var F=e+r.X(x)*i;a.save(),a.strokeStyle=T.THEME.gridLines,a.lineWidth=1,a.globalAlpha=.1,a.beginPath(),a.moveTo(F,n),a.lineTo(F,n+s),a.stroke(),a.restore(),a.save(),a.beginPath(),a.globalAlpha=H,a.arc(F,n+s-C(b[x])*s,o,0,h),a.lineWidth=u,a.strokeStyle=l[w],a.fillStyle=T.THEME.background,a.fill(),a.stroke(),a.restore()}}}function O(t){t.control;var e=t.ctx,n=(t.normX,t.normY,t.colors,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),a=n.textAlign||"left";return function(t,n,r,o,l,c,u){var s=Math.round(t.scaling.minHeightAnim.value),h=Math.round(t.scaling.maxHeightAnim.value),m=t.opacity.value,f=(l+l/6/2)/6,g=Math.ceil((h-s)/6);e.save(),e.beginPath(),e.fillStyle=T.THEME.gridLines,e.globalAlpha=u?m/2:.5,e.font=d,e.textBaseline="bottom",e.textAlign=a;for(var v=0;v<6;v++)c&&(e.moveTo(n,r+l-v*f),e.lineTo(n+o,r+l-v*f)),e.fillText(s+g*v,n+3,r+l-v*f-y);e.lineWidth=1*i,c&&(e.globalAlpha=.1,e.strokeStyle=T.THEME.gridLines,e.stroke()),e.restore()}}var B=[0,1,2,4,4,8,8,8,8,16,16,16,16,16,16,16,16,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64];function N(t){t.config,t.control;var e=t.ctx,n=t.norm,a=(t.colors,n.X(1));return function(t,r,i,o,l){var c=t.length;e.save(),e.fillStyle=T.THEME.gridLines,e.font=d,e.textAlign="center",e.textBaseline="middle",e.globalAlpha=.5;for(var u=o*a,s=(Math.floor(u),Math.ceil(m/u)),h=s+1,f=B[s],g=B[h],v=(u/(m/s)-1)*s,y=0;y<c;y+=f){var w=y%g;e.globalAlpha=0===w?.5:v>.5?.5:v;var x=r+n.X(y)*o,b=i+p;e.fillText(t[y].dayString,x,b)}e.restore()}}function z(t){t.ctx,t.config;var e=t.control,n=t.ys,a=t.yAxis,r=t.xAxis,i=O(t,{textAlign:"left"}),c=N(t),u=R(t),s=D(t);return function(t,h,d,m){var g=t-d*e.range[0]/e.scale,p=d/e.scale,y=m-f-l,w=h+o+x;c(r,g,h+y-v,p,v),i(a.items[0],t,w,d,y-v,!0);for(var b=0;b<a.items.length;b++)u(a.items[b],g,w,p,y-v);for(var A=0;A<n.length;A++)s(a.items[A],g,w,p,y-v)}}function I(t,e,n){var a=document.createElement(e);return a.className=n,t&&t.appendChild(a),a}var V=n(0),K=n.n(V);function W(t){return'\n\t\t<strong class="chart__popup-header">\n\t\t\t<span class="chart__popup-header-title">'.concat(t,'</span>\n\t\t\t<span class="chart__popup-header-icon"><img src="').concat(K.a,'" /></span>\n\t\t</strong>\n\t')}function J(t,e,n){return'\n\t\t<span class="chart__popup-item">\n\t\t\t<span class="chart__popup-item-title">'.concat(e,'</span>\n\t\t\t<span class="chart__popup-item-value" style="color: ').concat(t,'">').concat(n,"</span>\n\t\t</span>\n\t")}n(1);function q(t,e,n,a,r){var i={activeButtonsCount:a.items.length},o=I(t,"div","chart__buttons"),l={},c=a.items.map(function(t){return l[t[0]]=function(t,e,n,a,r,i){var o=a.key,l={enabled:!0},c=I(t,"button","chart__buttons-button");c.textContent=n.names[o],c.style.backgroundColor=n.colors[o],c.style.borderColor=n.colors[o];var u=null,s=!1;function h(){u=setTimeout(function(){r.resetAll(),s=!0},200)}function d(){clearTimeout(u)}function m(){!0===l.enabled?(c.className="chart__buttons-button",c.style.color="#FFF"):(c.className="chart__buttons-button unchecked",c.style.color=n.colors[o]),a.enabled=l.enabled,a.opacity.play(l.enabled?1:0),i&&i(l.enabled)}return c.addEventListener("click",function(){if(clearTimeout(u),s)s=!1;else{if(1===r.activeButtonsCount&&l.enabled)return c.className="chart__buttons-button error",void setTimeout(function(){c.className="chart__buttons-button"},140);l.enabled=!l.enabled,m()}}),c.addEventListener("mousedown",h),c.addEventListener("mousemove",d),c.addEventListener("touchstart",h),c.addEventListener("touchmove",d),l.reset=function(){l.enabled||(l.enabled=!0,m())},l}(o,0,n,t,i,function(t){i.activeButtonsCount+=t?1:-1,i.activeButtonsCount<1||r&&r()})});return i.resetAll=function(){c.forEach(function(t){t.reset()})},l}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){Q(t,e,n[e])})}return t}function Q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var $=function(t){return t===1/0||t===-1/0?0:t},tt=function(t){return Math.min.apply(null,t)},et=function(t){return Math.max.apply(null,t)},nt=function(t,e,n){return Math.min.apply(null,t.slice(e,1+n))},at=function(t,e,n){return Math.max.apply(null,t.slice(e,1+n))},rt=function(t){return Math.min.apply(null,t.map(tt))},it=function(t){return Math.max.apply(null,t.map(et))},ot=function(t,e,n){return Math.min.apply(null,t.map(function(t){return nt(t,e,n)}))},lt=function(t,e,n){return Math.max.apply(null,t.map(function(t){return at(t,e,n)}))},ct=function(t){var e,n,a=new Array(t[0].length).fill(0);for(e=0;e<t.length;e++)for(n=0;n<t[e].length;n++)a[n]+=t[e][n];return a};var ut=function(t,e,n){var o,l,h,d,m,f={left:0,top:0},v=I(window.CONTAINER,"div","chart"),p=function(t,e,n){var a=I(t,"div","chart__header"),r=I(a,"h2","chart__header-title");r.textContent=e;var i=I(a,"h3","chart__header-sub-title");return i.textContent=n,{setTitle:function(t){r.textContent=t},setSubtitle:function(t){i.textContent=t}}}(v,"Chart #".concat(n+1),"Hello world!"),y=I(v,"canvas","chart__canvas"),w=y.getContext("2d"),x=(d=[],{opts:m={active:!1},createAnimation:function(t,e,n){var a=new Y(t,e,n);return d.push(a),a},removeAnimation:function(t){var e=d.indexOf(t);e>-1&&d.splice(e,1)},updateAnimations:function(){for(var t=d.length,e=!1,n=0;n<t;n++)e=d[n].update()||e;return m.active=e,e}}),b={index:n,shouldChartUpdate:!0,shouldControlUpdate:!0,animator:x,mouse:P({config:b,canvas:y,canvasBounds:f}),maxHeight:0,minHeight:0,minHeightAnim:x.createAnimation(0,300),maxHeightAnim:x.createAnimation(0,300),startIndex:0,endIndex:0},A=e.colors;e.names,e.types,e.columns[0]=e.columns[0].map(function(t){return t.length?t:(e=t,n=new Date(e),{dayString:"".concat(a[n.getMonth()]," ").concat(n.getDate()),dateString:"".concat(r[n.getDay()],", ").concat(n.getDate()," ").concat(a[n.getMonth()]," ").concat(n.getFullYear()),dateStringTitle:"".concat(n.getDate()," ").concat(a[n.getMonth()]," ").concat(n.getFullYear()),date:n,timestamp:e});var e,n});var T=Z(e.columns),C=Z(T[0]),H=(C[0],C.slice(1)),F=T.slice(1),E=function(t,e,n){var a=t.map(function(t){var a=n.animator.createAnimation(1,300),r={key:t[0],items:t.slice(1),enabled:!0,opacity:a,scaling:{}};return e.y_scaled&&(r.scaling.minHeight=$(tt(r.items)),r.scaling.maxHeight=$(et(r.items)),r.scaling.minHeightAnim=n.animator.createAnimation(0,300),r.scaling.maxHeightAnim=n.animator.createAnimation(0,300),r.scaling.normY=_(n.animator,r.scaling.minHeight,r.scaling.maxHeight),r.scaling.normControlY=_(n.animator,r.scaling.minHeight,r.scaling.maxHeight),r.scaling.updateMinMax=function(t,e){r.scaling.minHeight=$(nt(r.items,t,e)),r.scaling.maxHeight=$(at(r.items,t,e)),r.scaling.minHeightAnim.play(r.scaling.minHeight),r.scaling.maxHeightAnim.play(r.scaling.maxHeight),r.scaling.normY.updateDelta(r.scaling.minHeight,r.scaling.maxHeight)}),r});if(!e.y_scaled){var r=a.filter(function(t){return t.enabled}).map(function(t){return t.items}),i={};if(e.stacked)if(e.percentage){var o=$(et(ct(r))),l=n.animator.createAnimation(0,300),c=n.animator.createAnimation(0,300);i.minHeight=0,i.maxHeight=100,i.minHeightAnim=l,i.maxHeightAnim=c,i.normY=_(n.animator,0,100),i.normControlY=_(n.animator,0,o),i.updateMinMax=function(t,e){var n=a.filter(function(t){return t.enabled}).map(function(t){return t.items});i.minHeight=0;try{i.maxHeight=100}catch(t){return}i.minHeightAnim.play(i.minHeight),i.maxHeightAnim.play(i.maxHeight),i.normY.updateDelta(i.minHeight,i.maxHeight);var r=$(et(ct(n)));i.normControlY.updateDelta(0,r)}}else{var u=$(et(ct(r))),s=at(ct(r),0,u),h=n.animator.createAnimation(0,300),d=n.animator.createAnimation(0,300);i.minHeight=0,i.maxHeight=s,i.minHeightAnim=h,i.maxHeightAnim=d,i.normY=_(n.animator,0,s),i.normControlY=_(n.animator,0,u),i.updateMinMax=function(t,e){var n=a.filter(function(t){return t.enabled}).map(function(t){return t.items});i.minHeight=0;try{i.maxHeight=$(at(ct(n),t,e))}catch(t){return}i.minHeightAnim.play(i.minHeight),i.maxHeightAnim.play(i.maxHeight),i.normY.updateDelta(i.minHeight,i.maxHeight);var r=$(et(ct(n)));i.normControlY.updateDelta(0,r)}}else{var m=$(rt(r)),f=$(it(r)),g=rt(r,m,f),v=it(r,m,f),p=n.animator.createAnimation(0,300),y=n.animator.createAnimation(0,300);i.minHeight=g,i.maxHeight=v,i.minHeightAnim=p,i.maxHeightAnim=y,i.normY=_(n.animator,g,v),i.normControlY=_(n.animator,m,f),i.updateMinMax=function(t,e){var n=a.filter(function(t){return t.enabled}).map(function(t){return t.items});i.minHeight=$(ot(n,t,e)),i.maxHeight=$(lt(n,t,e)),i.minHeightAnim.play(i.minHeight),i.maxHeightAnim.play(i.maxHeight),i.normY.updateDelta(i.minHeight,i.maxHeight);var r=$(rt(n)),o=$(it(n));i.normControlY.updateDelta(r,o)}}a.forEach(function(t){t.scaling=i})}return{items:a}}(F,e,b);b.endIndex=H.length,p.setSubtitle("".concat(H[0].dateStringTitle," - ").concat(H[H.length-1].dateStringTitle)),b.popup=function(t,e,n,a){var r=I(t,"div","chart__popup");return{element:r,update:function(t){var e=a.items.filter(function(t){return t.enabled}).map(function(e){return J(n.colors[e.key],n.names[e.key],e.items[t+1])});e.length&&(r.innerHTML="\n\t\t\t\t".concat(W(n.columns[0][t+1].dateString),"\n\t\t\t\t").concat(e.join(""),"\n\t\t\t"))},show:function(t){var e=a.items.filter(function(t){return t.enabled}).map(function(e){return J(n.colors[e.key],n.names[e.key],e.items[t+1])});e.length&&(r.innerHTML="\n\t\t\t\t".concat(W(n.columns[0][t+1].dateString),"\n\t\t\t\t").concat(e.join(""),"\n\t\t\t"),r.style.opacity=1,r.style.visibility="visible")},hide:function(){r.style.opacity=0,r.style.visibility="hidden"}}}(v,0,e,E);var S=q(v,b.animator,e,E,function(){k()});b.buttons=S;var R={X:M(0,H.length-1)};function k(){var t=X.range[0],e=X.range[1],n=t*H.length,a=n<0?0:Math.floor(n),r=e*H.length,i=r>H.length?H.length:Math.ceil(r);E.items.forEach(function(t){return t.scaling.updateMinMax(a,i)}),p.setSubtitle("".concat(H[a].dateStringTitle," - ").concat(H[i-1].dateStringTitle))}var X={range:[.7,1],count:0,scale:0,updateRange:function(t,e){var n=e-t,a=H.length*n;a>5&&(X.count=Math.ceil(a),X.scale=n,X.range[0]=t,X.range[1]=e,k())},normalizeForControl:function(t){return h(t)}};function L(){var t=y.getBoundingClientRect(),e=t.width*i,n=t.height*i;f.width=e,f.height=c,f.left=t.left,f.right=t.right,f.top=t.top,f.bottom=t.bottom,f.x=t.x,f.y=t.y,o===e&&l===n||(b.shouldChartUpdate=!0,b.shouldControlUpdate=!0,h=M(s,f.width-s),o=y.width=f.width,l=y.height=c)}function U(t){L(),b.animator.updateAnimations()&&(b.shouldChartUpdate=!0),b.shouldChartUpdate&&(b.shouldChartUpdate=!1,w.clearRect(0,0,o,c-g),O(u,0,o-s,c-g)),b.shouldControlUpdate&&(b.shouldControlUpdate=!1,w.clearRect(0,c-g,o,g),B(u,c-g,o-s,g))}window.addEventListener("resize",L),X.updateRange(X.range[0],X.range[1]),L(),k();var D={config:b,control:X,ctx:w,norm:R,colors:A,ys:F,buttons:S,xAxis:H,yAxis:E,canvasBounds:f,normYKey:"normY"},O=t.drawChartFabric?t.drawChartFabric(D):z(D),B=t.drawControlFabric?t.drawControlFabric(G({},D,{normYKey:"normControlY"})):j(G({},D,{normYKey:"normControlY"}));return U(),{render:U,control:X,update:function(){b.shouldChartUpdate=!0,b.shouldControlUpdate=!0}}};function st(t){var e=t.config,n=(t.control,t.ctx),a=t.norm,r=t.colors,i=t.normYKey,o=(t.yAxis,arguments.length>1&&void 0!==arguments[1]&&arguments[1],a.X(1));return function(t,a,l,c,u,s){var h=t.key,d=t.items,m=t.opacity,f=t.scaling[i],g=m.value;if(g){g<1&&(e.shouldControlUpdate=!0);var v=d.length;n.save(),n.beginPath();for(var p=1;p<v;p++){a[p]+=d[p]*g;var y=o*u,w=l+y*p-y,x=c+s-f(a[p])*s,b=f(d[p])*s*g;n.rect(w,x,y,b>0?b:0)}n.fillStyle=r[h],n.strokeStyle=r[h],n.fill(),n.restore()}}}function ht(t){t.ctx,t.config;var e=t.control,n=(t.ys,t.yAxis),a=t.xAxis,r=N(t),i=st(t),c=O(t,{textAlign:"left"});return function(t,u,s,h){for(var d=t-s*e.range[0]/e.scale,m=s/e.scale,g=h-f-l,p=u+o+x,y=new Array(a.length).fill(0),w=0;w<n.items.length;w++)i(n.items[w],y,d,p,m,g-v);r(a,d,u+g-v,m,v),c(n.items[0],t,p,s,g-v,!0)}}var dt=0,mt=1,ft=2,gt=3;function vt(t){var e=t.ctx,n=t.config,a=(t.canvasBounds,t.control),r=(t.ys,t.yAxis),o=t.xAxis,l=st(t),c=0,u=0,s=u-c,h=10*i,d=h/2,m=10*i,f=2*m,g=m/2,v=m-m/3,p=2*i,y=(m-p)/2,x=dt,b=14*i,A=[a.range[0],a.range[1]],C={start:{x:0,y:0,width:0,height:0},end:{x:0,y:0,width:0,height:0}};return n.mouse.addListener("move",function(t){if(x!==dt){n.shouldChartUpdate=!0,n.shouldControlUpdate=!0;var e=a.normalizeForControl(t.newX)-a.normalizeForControl(t.x),r=A[0]+e,i=A[1]+e;if(x===mt)r>0?a.updateRange(r,A[1]):a.updateRange(0,A[1]);else if(x===ft)i<1?a.updateRange(A[0],i):a.updateRange(A[0],1);else if(r>=0&&i<=1)a.updateRange(r,i);else if(i>1){var o=1-A[1];a.updateRange(A[0]+o,A[1]+o)}else if(r<0){var l=0-A[0];a.updateRange(A[0]+l,A[1]+l)}}}),n.mouse.addListener("down",function(t){var e=b,r=b,i=C.start,o=C.end;t.y>i.y&&t.y<i.y+i.height&&(n.shouldChartUpdate=!0,n.shouldControlUpdate=!0,A=[a.range[0],a.range[1]],t.newX>i.x-e&&t.newX<i.x+i.width&&t.newY>i.y-e&&t.newY<i.y+i.height+e?x=mt:t.newX>o.x&&t.newX<o.x+o.width+r&&t.newY>o.y-r&&t.newY<o.y+o.height+r?x=ft:t.newX>i.x+i.width&&t.newX<o.x&&t.newY>o.y-b&&t.newY<o.y+o.height+b&&(x=gt))}),n.mouse.addListener("up",function(t){x=dt}),function(t,n,i,x){var b=i,A=t;i-=f,t+=m;for(var H=new Array(o.length).fill(0),F=0;F<r.items.length;F++)l(r.items[F],H,t,n+3,i,x-6);c=t+i*a.range[0],u=t+i*a.range[1],s=u-c,C.start.x=c-m,C.start.y=n,C.start.width=m,C.start.height=x,C.end.x=u,C.end.y=n,C.end.width=m,C.end.height=x,e.save(),e.globalAlpha=.6,e.fillStyle=T.THEME.scrollBackground,e.beginPath(),e.moveTo(c-1,n),e.lineTo(c-1,n+x),e.arcTo(A,n+x,A,n+x-m,g),e.arcTo(A,n,c-1,n,g),e.closePath(),e.fill(),e.beginPath(),e.moveTo(u+1,n),e.lineTo(u+1,n+x),e.arcTo(A+b,n+x,A+b,n+x-m,g),e.arcTo(A+b,n,u,n,g),e.closePath(),e.fill(),e.restore(),e.save(),e.fillStyle=T.THEME.scrollSelector,e.beginPath(),e.rect(c,n,s,w),e.rect(c,n+x-w,s,w),e.fill(),e.beginPath();var E=c;e.moveTo(E,n),e.lineTo(E,n+x),e.arcTo(E-m,n+x,E-m,n+x-m,v),e.arcTo(E-m,n,E,n,v),e.closePath(),e.fill(),e.beginPath(),e.moveTo(u,n),e.lineTo(u,n+x),e.arcTo(u+m,n+x,u+m,n+x-m,v),e.arcTo(u+m,n,u,n,v),e.closePath(),e.fill(),e.restore(),e.save(),e.beginPath(),e.fillStyle="#FFFFFF",e.rect(c-y,n+x/2-d,-p,h),e.rect(u+y,n+x/2-d,p,h),e.fill(),e.restore()}}function pt(t){var e=t.config,n=(t.control,t.ctx),a=t.norm,r=t.colors,i=t.normYKey,o=(t.yAxis,arguments.length>1&&void 0!==arguments[1]&&arguments[1],a.X(1));return function(t,a,l,c,u,s,h){var d=t.key,m=t.items,f=t.opacity,g=t.scaling[i],v=f.value;if(v){v<1&&(e.shouldControlUpdate=!0);var p=m.length;n.save(),n.beginPath();var y=o*s;a[0]+=m[0]*v;var w=l[0]/100,x=u+h-g(Math.round(a[0]/w))*h;n.moveTo(c,x);for(var b=1;b<p;b++){a[b]+=m[b]*v;var A=l[b]/100,T=c+y*b-y,C=u+h-g(Math.round(a[b]/A))*h;n.lineTo(T,C)}n.globalAlpha=v,n.fillStyle=r[d],n.strokeStyle=r[d],n.stroke(),n.restore()}}}var yt=0,wt=1,xt=2,bt=3;window.CONTAINER=document.querySelector("#container");var At=[];!function(t,e){var n=!0,a=I(t,"button","change-theme");function r(){a.textContent="Switch to ".concat(n?"Night":"Day"," Mode"),e&&e(n)}a.addEventListener("click",function(){n=!n,r()}),r()}(window.CONTAINER,function(t){console.log(t),T.THEME=t?b:A,document.body.className=t?"day":"night",At.forEach(function(t){return t.update()})});var Tt=[{drawChartFabric:function(t){return z(t)},drawControlFabric:function(t){return j(t)}},{drawChartFabric:function(t){return function(t){t.ctx,t.config;var e=t.control,n=t.ys,a=t.yAxis,r=t.xAxis,i=O(t,{textAlign:"left"}),c=O(t,{textAlign:"right"}),u=N(t),s=R(t),h=D(t);return function(t,d,m,g){var p=t-m*e.range[0]/e.scale,y=m/e.scale,w=g-f-l,b=d+o+x;u(r,p,d+w-v,y,v);var A=!0;a.items[0].enabled&&(i(a.items[0],t,b,m,w-v,A),A=!1),a.items[1].enabled&&(c(a.items[1],t+m,b,-m,w-v,A),A=!1);for(var T=0;T<a.items.length;T++)s(a.items[T],p,b,y,w-v);for(var C=0;C<n.length;C++)h(a.items[C],p,b,y,w-v)}}(t)},drawControlFabric:function(t){return j(t)}},{drawChartFabric:function(t){return ht(t)},drawControlFabric:function(t){return vt(t)}},{drawChartFabric:function(t){return ht(t)},drawControlFabric:function(t){return vt(t)}},{drawChartFabric:function(t){return function(t){t.ctx,t.config;var e=t.control,n=(t.ys,t.yAxis),a=t.xAxis,r=N(t),i=pt(t),c=O(t,{textAlign:"left"});return function(t,u,s,h){for(var d=t-s*e.range[0]/e.scale,m=s/e.scale,g=h-f-l,p=u+o+x,y=new Array(a.length).fill(0),w=0;w<n.items.length;w++)for(var b=0;b<n.items[w].items.length;b++)y[b]+=n.items[w].items[b]*n.items[w].opacity.value;for(var A=new Array(a.length).fill(0),T=0;T<n.items.length;T++)i(n.items[T],A,y,d,p,m,g-v);r(a,d,u+g-v,m,v),c(n.items[0],t,p,s,g-v,!0)}}(t)},drawControlFabric:function(t){return n=(e=t).ctx,a=e.config,e.canvasBounds,r=e.control,e.ys,o=e.yAxis,l=e.xAxis,c=pt(e),h=(s=0)-(u=0),m=(d=10*i)/2,g=2*(f=10*i),v=f/2,p=f-f/3,x=(f-(y=2*i))/2,b=yt,A=14*i,C=[r.range[0],r.range[1]],H={start:{x:0,y:0,width:0,height:0},end:{x:0,y:0,width:0,height:0}},a.mouse.addListener("move",function(t){if(b!==yt){a.shouldChartUpdate=!0,a.shouldControlUpdate=!0;var e=r.normalizeForControl(t.newX)-r.normalizeForControl(t.x),n=C[0]+e,i=C[1]+e;if(b===wt)n>0?r.updateRange(n,C[1]):r.updateRange(0,C[1]);else if(b===xt)i<1?r.updateRange(C[0],i):r.updateRange(C[0],1);else if(n>=0&&i<=1)r.updateRange(n,i);else if(i>1){var o=1-C[1];r.updateRange(C[0]+o,C[1]+o)}else if(n<0){var l=0-C[0];r.updateRange(C[0]+l,C[1]+l)}}}),a.mouse.addListener("down",function(t){var e=A,n=A,i=H.start,o=H.end;t.y>i.y&&t.y<i.y+i.height&&(a.shouldChartUpdate=!0,a.shouldControlUpdate=!0,C=[r.range[0],r.range[1]],t.newX>i.x-e&&t.newX<i.x+i.width&&t.newY>i.y-e&&t.newY<i.y+i.height+e?b=wt:t.newX>o.x&&t.newX<o.x+o.width+n&&t.newY>o.y-n&&t.newY<o.y+o.height+n?b=xt:t.newX>i.x+i.width&&t.newX<o.x&&t.newY>o.y-A&&t.newY<o.y+o.height+A&&(b=bt))}),a.mouse.addListener("up",function(t){b=yt}),function(t,e,a,i){var b=a,A=t;a-=g,t+=f;for(var C=new Array(l.length).fill(0),F=0;F<o.items.length;F++)c(o.items[F],C,t,e+3,a,i-6);u=t+a*r.range[0],s=t+a*r.range[1],h=s-u,H.start.x=u-f,H.start.y=e,H.start.width=f,H.start.height=i,H.end.x=s,H.end.y=e,H.end.width=f,H.end.height=i,n.save(),n.globalAlpha=.6,n.fillStyle=T.THEME.scrollBackground,n.beginPath(),n.moveTo(u-1,e),n.lineTo(u-1,e+i),n.arcTo(A,e+i,A,e+i-f,v),n.arcTo(A,e,u-1,e,v),n.closePath(),n.fill(),n.beginPath(),n.moveTo(s+1,e),n.lineTo(s+1,e+i),n.arcTo(A+b,e+i,A+b,e+i-f,v),n.arcTo(A+b,e,s,e,v),n.closePath(),n.fill(),n.restore(),n.save(),n.fillStyle=T.THEME.scrollSelector,n.beginPath(),n.rect(u,e,h,w),n.rect(u,e+i-w,h,w),n.fill(),n.beginPath();var E=u;n.moveTo(E,e),n.lineTo(E,e+i),n.arcTo(E-f,e+i,E-f,e+i-f,p),n.arcTo(E-f,e,E,e,p),n.closePath(),n.fill(),n.beginPath(),n.moveTo(s,e),n.lineTo(s,e+i),n.arcTo(s+f,e+i,s+f,e+i-f,p),n.arcTo(s+f,e,s,e,p),n.closePath(),n.fill(),n.restore(),n.save(),n.beginPath(),n.fillStyle="#FFFFFF",n.rect(u-x,e+i/2-m,-y,d),n.rect(s+x,e+i/2-m,y,d),n.fill(),n.restore()};var e,n,a,r,o,l,c,u,s,h,d,m,f,g,v,p,y,x,b,A,C,H}}];Promise.all([fetch("assets/stage_2_data/1/overview.json").then(function(t){return t.json()}),fetch("assets/stage_2_data/2/overview.json").then(function(t){return t.json()}),fetch("assets/stage_2_data/3/overview.json").then(function(t){return t.json()}),fetch("assets/stage_2_data/4/overview.json").then(function(t){return t.json()}),fetch("assets/stage_2_data/5/overview.json").then(function(t){return t.json()})]).then(function(t){(At=t.map(function(t,e){return ut(Tt[e],t,e)})).forEach(function(t){F.add(function(){t.render()})})})}]);