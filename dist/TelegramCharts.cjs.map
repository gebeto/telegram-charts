{"version":3,"file":"TelegramCharts.cjs","sources":["../src/Utils/AnimationLoop.js","../src/Globals.js","../src/Utils/Mouse.js","../src/Utils/Animated.js","../src/utils.js","../src/Utils/YAxis.js","../src/UI/utils.js","../src/UI/Popup.js","../src/UI/Header.js","../src/UI/Buttons.js","../src/Drawers/Layers/Bar.js","../src/Drawers/Layers/utils.js","../src/Drawers/Layers/BarActivePopup.js","../src/Drawers/Layers/YAxis.js","../src/Drawers/Layers/XAxis.js","../src/Drawers/Charts/BarChart.js","../src/Drawers/Controls/utils.js","../src/Drawers/Controls/BarControls.js","../src/Drawers/Layers/Line.js","../src/Drawers/Layers/LineActivePopup.js","../src/Drawers/Charts/utils.js","../src/Drawers/Charts/DualLineChart.js","../src/Drawers/Charts/LineChart.js","../src/Drawers/Controls/LineControls.js","../src/Drawers/Layers/Area.js","../src/Drawers/Charts/AreaChart.js","../src/Drawers/Layers/AreaLine.js","../src/Drawers/Layers/AreaLineActivePopup.js","../src/Drawers/Charts/AreaLineChart.js","../src/Drawers/Controls/AreaLineControls.js","../src/ChartTypes.js","../src/Chart.js","../src/UI/Theme.js","../src/index.js"],"sourcesContent":["function createAnimationLoop() {\n  const animationHandlers = [];\n\n  const publicInterface = {\n    time: 0,\n    add(handler) {\n      animationHandlers.push(handler);\n    },\n    remove(handler) {\n      const index = animationHandlers.indexOf(handler);\n      if (index > -1) {\n        animationHandlers.splice(index, 1);\n      }\n    },\n  };\n\n  function loop(loopTime) {\n    publicInterface.time = loopTime;\n    for (let i = 0; i < animationHandlers.length; i++) {\n      animationHandlers[i](loopTime);\n    }\n    requestAnimationFrame(loop);\n  }\n  requestAnimationFrame(loop);\n\n  return publicInterface;\n}\n\nconst animationLoop = createAnimationLoop();\n\nexport default animationLoop;\n","export const MONTH_NAMES = [\n  \"Jan\",\n  \"Feb\",\n  \"Mar\",\n  \"Apr\",\n  \"May\",\n  \"Jun\",\n  \"Jul\",\n  \"Aug\",\n  \"Sep\",\n  \"Oct\",\n  \"Nov\",\n  \"Dec\",\n];\nexport const DAY_NAMES = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\nexport const PIXEL_RATIO = window.devicePixelRatio;\nexport const CONTROL_HEIGHT = 43 * PIXEL_RATIO;\n\nexport const DOT_RADIUS = 4 * PIXEL_RATIO;\nexport const DOT_RADIUS_DIV_2 = DOT_RADIUS / 2;\nexport const DOT_RADIUS_MUL_2 = DOT_RADIUS * 2;\nexport const CANVAS_HEIGHT = 343 * PIXEL_RATIO;\nexport const SIDES_PADDING = 16 * PIXEL_RATIO;\nexport const SIDES_PADDING2 = SIDES_PADDING * 2;\nexport const CHART_HEIGHT = CANVAS_HEIGHT - CONTROL_HEIGHT;\nexport const PI2 = Math.PI * 2;\nexport const PI1 = Math.PI / 100;\n\nexport const FONT = `${11 * PIXEL_RATIO}px sans-serif`;\nexport const AXIS_TEXT_WIDTH = 40 * PIXEL_RATIO;\nexport const AXIS_TEXT_WIDTH_DIV_2 = AXIS_TEXT_WIDTH / 2;\nexport const AXIS_TEXT_WIDTH_MUL_2 = AXIS_TEXT_WIDTH * 2;\nexport const AXIS_TEXT_WIDTH_MUL_3 = AXIS_TEXT_WIDTH * 3;\n\nexport const BOTTOM_PADDING = 7 * PIXEL_RATIO;\n\nexport const X_AXIS_HEIGHT = 29 * PIXEL_RATIO;\nexport const X_AXIS_HEIGHT_DIV_2 = X_AXIS_HEIGHT / 2;\n\nexport const Y_AXIS_TEXT_PADDING = 5 * PIXEL_RATIO;\nexport const ONE = 1 * PIXEL_RATIO;\nexport const TWO = 2 * PIXEL_RATIO;\n\nexport const ANIMATION_SPEED = 200;\n\nexport const CURRENT = {\n  THEME: {},\n};\n","import { PIXEL_RATIO } from '../Globals';\n\n// let lastEntered = null;\n\nfunction createDispatcher(types) {\n\tconst handlers = {};\n\tconst dispatchers = {};\n\tconst mouse = {\n\t\tx: 0,\n\t\ty: 0,\n\t\txRaw: 0,\n\t\tyRaw: 0,\n\n\t\tnewX: 0,\n\t\tnewY: 0,\n\t\tnewXRaw: 0,\n\t\tnewYRaw: 0,\n\n\t\tisHolding: false,\n\t}\n\ttypes.forEach(type => {\n\t\thandlers[type] = [];\n\t\tdispatchers[type] = function(mouse, event) {\n\t\t\tfor (let i = 0; i < handlers[type].length; i++) {\n\t\t\t\thandlers[type][i](mouse, event);\n\t\t\t}\n\t\t}\n\t});\n\treturn {\n\t\tmouse: mouse,\n\t\taddListener(type, handler) {\n\t\t\thandlers[type].push(handler);\n\t\t},\n\t\tremoveListener(type, handler) {\n\t\t\tconst index = handlers[type].indexOf(handler);\n\t\t\thandlers[type].splice(index, 1);\n\t\t},\n\t\tdispatch(type, event) {\n\t\t\tif (dispatchers[type]) {\n\t\t\t\tdispatchers[type](mouse, event);\n\t\t\t} else {\n\t\t\t\tthrow Error(\"Unknown event\");\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function createMouseForChart(config) {\n\tconst dispatcher = createDispatcher(['move', 'enter', 'leave', 'down', 'up']);\n\tconst mouse = dispatcher.mouse;\n\n\tfunction onMouseDown(e) {\n\t\tmouse.xRaw = e.clientX - config.canvasBounds.left;\n\t\tmouse.yRaw = e.clientY - config.canvasBounds.top;\n\t\tmouse.x = mouse.xRaw * PIXEL_RATIO;\n\t\tmouse.y = mouse.yRaw * PIXEL_RATIO;\n\n\t\tmouse.newXRaw = mouse.xRaw;\n\t\tmouse.newYRaw = mouse.yRaw;\n\t\tmouse.newX = mouse.x;\n\t\tmouse.newY = mouse.y;\n\n\t\tdispatcher.dispatch('down', e);\n\t}\n\n\tfunction onMouseMove(e) {\n\t\tmouse.newXRaw = e.clientX - config.canvasBounds.left;\n\t\tmouse.newYRaw = e.clientY - config.canvasBounds.top;\n\t\tmouse.newX = mouse.newXRaw * PIXEL_RATIO;\n\t\tmouse.newY = mouse.newYRaw * PIXEL_RATIO;\n\n\t\tdispatcher.dispatch('move', e);\n\t}\n\n\tfunction onMouseEnter(e) {\n\t\tdispatcher.dispatch('enter', e);\n\t}\n\n\tfunction onMouseUp(e) {\n\t\tmouse.isHolding = false;\n\t\tdispatcher.dispatch('up', e);\n\t}\n\n\tfunction onTouchDown(e) {\n\t\tonMouseDown(e.touches[0]);\n\t}\n\tfunction onTouchMove(e) {\n\t\tonMouseMove(e.touches[0]);\n\t}\n\n\tdocument.addEventListener('mousedown', onMouseDown);\n\tdocument.addEventListener('mousemove', onMouseMove);\n\tdocument.addEventListener('mouseup', onMouseUp);\n\n\tdocument.addEventListener('touchstart', onTouchDown);\n\tdocument.addEventListener('touchmove', onTouchMove, { passive: false });\n\tdocument.addEventListener('touchend', onMouseUp);\n\tdocument.addEventListener('touchcancel', onMouseUp);\n\tdocument.addEventListener('selectstart', e => false);\n\n\treturn {\n\t\tmouse: mouse,\n\t\taddListener: dispatcher.addListener,\n\t\tremoveListener: dispatcher.removeListener,\n\t};\n}","import AnimationLoop from './AnimationLoop';\n\n\nexport default class Animated {\n\tconstructor(value, duration, onAnimation) {\n\t\tthis.onAnimation = onAnimation;\n\t\tthis.fromValue = value;\n\t\tthis.toValue = value;\n\t\tthis.value = value;\n\t\tthis.startTime = 0;\n\t\tthis.duration = duration;\n\t\tthis.delay = 0;\n\n\t\tthis.inProgress = false;\n\t}\n\n\tplayFrom(fromValue, toValue) {\n\t\tthis.value = fromValue;\n\t\tthis.play(toValue);\n\t}\n\n\tplay(toValue) {\n\t\tthis.inProgress = true;\n\t\tthis.startTime = AnimationLoop.time;\n\t\tthis.toValue = toValue;\n\t\tthis.fromValue = this.value;\n\t}\n\n\tupdate() {\n\t\tconst result = this._update();\n\t\tresult && this.onAnimation && this.onAnimation(this.value);\n\t\treturn result;\n\t}\n\n\t_update() {\n\t\tif (this.value === this.toValue) {\n\t\t\tthis.inProgress = false;\n\t\t\treturn false;\n\t\t}\n\t\tthis.inProgress = true;\n\t\tlet progress = ((AnimationLoop.time - this.startTime) - this.delay) / this.duration;\n\t\tif (progress < 0) progress = 0;\n\t\tif (progress > 1) progress = 1;\n\t\tconst ease = -progress * (progress - 2);\n\t\tthis.value = this.fromValue + (this.toValue - this.fromValue) * ease;\n\t\treturn true;\n\t}\n}\n\n\nexport function animateObject(animator, object, key, valueFrom, valueTo, onFrame) {\n\tconst MULTIPLIER = 100;\n\tconst animation = animator.createAnimation(Math.round(valueFrom * MULTIPLIER), 200, (value) => {\n\t\tobject[key] = value / MULTIPLIER;\n\t\tonFrame && onFrame(object[key]);\n\t});\n\tanimation.play(Math.round(valueTo * MULTIPLIER));\n}\n\n\nexport function createAnimator() {\n\tconst animations = [];\n\tconst opts = {\n\t\tactive: false,\n\t};\n\n\tfunction createAnimation(value, duration, onAnimation) {\n\t\tconst animation = new Animated(value, duration, onAnimation)\n\t\tanimations.push(animation);\n\t\treturn animation;\n\t}\n\n\tfunction removeAnimation(animation) {\n\t\tconst index = animations.indexOf(animation);\n\t\tif (index > -1) {\n\t\t\tanimations.splice(index, 1);\n\t\t}\n\t}\n\n\tfunction updateAnimations() {\n\t\tconst count = animations.length;\n\t\tlet isActive = false;\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tisActive = animations[i].update() || isActive;\n\t\t}\n\t\topts.active = isActive;\n\t\treturn isActive;\n\t}\n\n\treturn {\n\t\topts,\n\t\tcreateAnimation,\n\t\tremoveAnimation,\n\t\tupdateAnimations,\n\t}\n}","import { ANIMATION_SPEED } from './Globals';\nimport Animated from './Utils/Animated';\n\n\nexport function formatNumber(n, short) {\n\tvar abs = Math.abs(n);\n\tif (abs > 1000000000 && short) return (n / 1000000000).toFixed(2) + 'B';\n\tif (abs > 1000000 && short) return (n / 1000000).toFixed(2) + 'M';\n\tif (abs > 1000 && short) return (n / 1000).toFixed(1) + 'K';\n\tif (abs > 1) return n.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\n\treturn n.toString()\n}\n\n\nexport function normalizeMemo(min, max) {\n\tconst delta = max - min;\n\tconst memo = {};\n\n\tfunction norm(val) {\n\t\tif (!memo[val]) {\n\t\t\tmemo[val] = (val - min) / delta;\n\t\t}\n\t\treturn memo[val];\n\t}\n\n\tnorm.de = function denorm(val) {\n\t\treturn val * delta + min;\n\t}\n\n\tnorm.data = {\n\t\tdelta: delta,\n\t\tmin: min,\n\t\tmax: max,\n\t}\n\n\treturn norm;\n}\n\nexport function normalize(min, max) {\n\tconst delta = max - min;\n\n\tfunction norm(val) {\n\t\treturn (val - min) / delta;\n\t};\n\n\tnorm.de = function denorm(val) {\n\t\treturn val * delta + min;\n\t}\n\n\treturn norm;\n}\n\nexport function normalizeAnimated(animator, min, max) {\n\tlet newMax = min;\n\tconst newMin = animator.createAnimation(min, ANIMATION_SPEED);\n\tconst delta = animator.createAnimation(max - min, ANIMATION_SPEED);\n\tfunction norm(val) {\n\t\treturn (val - newMin.value) / delta.value;\n\t};\n\tnorm.updateDelta = (min, max) => {\n\t\tnewMax = max;\n\t\tnewMin.play(min);\n\t\tdelta.play(max - min);\n\t};\n\treturn norm;\n}\n\nexport const debounce = (func, delay) => {\n\tlet inDebounce\n\treturn function() {\n\t\tconst context = this\n\t\tconst args = arguments\n\t\tclearTimeout(inDebounce)\n\t\tinDebounce = setTimeout(() => func.apply(context, args), delay)\n\t}\n}\n\nexport const throttle = (func, limit) => {\n\tlet inThrottle;\n\treturn function() {\n\t\tconst args = arguments;\n\t\tconst context = this;\n\t\tif (!inThrottle) {\n\t\t\tfunc.apply(context, args);\n\t\t\tinThrottle = true;\n\t\t\tsetTimeout(() => inThrottle = false, limit);\n\t\t}\n\t}\n}\n\nexport const throttleL = (func, limit) => {\n\tlet inThrottle;\n\treturn function() {\n\t\tconst args = arguments;\n\t\tconst context = this;\n\t\tif (!inThrottle) {\n\t\t\tinThrottle = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\tfunc.apply(context, args);\n\t\t\t\tinThrottle = false;\n\t\t\t}, limit);\n\t\t}\n\t}\n}\n\nexport const throttleLForceable = (func, limit) => {\n\tlet inThrottle;\n\treturn function(force) {\n\t\tconst context = this;\n\t\tif (force) {\n\t\t\tfunc.apply(context, null);\n\t\t\treturn;\n\t\t}\n\t\tif (!inThrottle) {\n\t\t\tinThrottle = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\tfunc.apply(context, null);\n\t\t\t\tinThrottle = false;\n\t\t\t}, limit);\n\t\t}\n\t}\n}\n\nexport function memo(fun) {\n\tconst memos = {};\n\treturn function memoized(arg) {\n\t\tif (!memos[arg]) {\n\t\t\tmemos[arg] = fun(arg);\n\t\t}\n\t\treturn memos[arg];\n\t}\n}\n\nexport const average = (curr, item) => curr + item;\n\n\n\n\nexport const uninf = (val) => (val === Infinity || val === -Infinity) ? 0 : val;\n\nexport const singleMin = set => Math.min.apply(null, set);\nexport const singleMax = set => Math.max.apply(null, set);\nexport const singleMinRange = (set, start, end) => Math.min.apply(null, set.slice(start, 1 + end));\nexport const singleMaxRange = (set, start, end) => Math.max.apply(null, set.slice(start, 1 + end));\n\nexport const flatMin = (arr) => Math.min.apply(null, arr.map(singleMin));\nexport const flatMax = (arr) => Math.max.apply(null, arr.map(singleMax));\nexport const flatMinRange = (arr, start, end) => Math.min.apply(null, arr.map(set => singleMinRange(set, start, end)));\nexport const flatMaxRange = (arr, start, end) => Math.max.apply(null, arr.map(set => singleMaxRange(set, start, end)));\n\n\nexport const zipSum = (arr) => {\n\t// console.log(arr.length);\n\tconst res = new Array(arr[0].length).fill(0);\n\tlet i, j\n\tfor (i = 0; i < arr.length; i++) {\n\t\tfor (j = 0; j < arr[i].length; j++) {\n\t\t\tres[j] += arr[i][j];\n\t\t}\n\t}\n\treturn res;\n}\n\nexport const flatMaxZipSum = (arr, start, end) => {\n\treturn arr.map(set => singleMax(set));\n};\n\nexport const flatMaxZipSumRange = (arr, start, end) => {\n\treturn arr.map(set => singleMaxRange(set, start, end)).reduce((sum, el) => sum + el, 0);\n};","import {\n\tANIMATION_SPEED,\n\tMONTH_NAMES,\n\tDAY_NAMES,\n} from '../Globals';\n\nimport {\n\tnormalizeAnimated,\n\tnormalize,\n\tzipSum,\n\n\tuninf,\n\tsingleMin,\n\tsingleMax,\n\tsingleMinRange,\n\tsingleMaxRange,\n\tflatMin,\n\tflatMax,\n\tflatMinRange,\n\tflatMaxRange,\n} from '../utils';\n\n\n\nexport const DATE_TYPE_HOUR = 3600000\nexport const DATE_TYPE_DAY = 86400000\nexport const DATE_TYPE_WEEK = 3\nexport const DATE_TYPES = {\n\t[DATE_TYPE_HOUR]: {\n\t\tdayString: (date) => date.toISOString().split(\"T\")[1].split(\":\").slice(0, 2).join(':'),\n\t\tdateString: (date) => `${DAY_NAMES[date.getDay()]}, ${date.toISOString().split(\"T\")[1].split(\":\").slice(0, 2).join(':')}`,\n\t\tdateStringTitle: (date) => `${date.getDate()} ${MONTH_NAMES[date.getMonth()]} ${date.getFullYear()}`,\n\t},\n\t[DATE_TYPE_DAY]: {\n\t\tdayString: (date) => `${MONTH_NAMES[date.getMonth()]} ${date.getDate()}`,\n\t\tdateString: (date) => `${DAY_NAMES[date.getDay()]}, ${date.getDate()} ${MONTH_NAMES[date.getMonth()]} ${date.getFullYear()}`,\n\t\tdateStringTitle: (date) => `${date.getDate()} ${MONTH_NAMES[date.getMonth()]} ${date.getFullYear()}`,\n\t},\n\t[DATE_TYPE_WEEK]: {\n\t\tdayString: (date) => `${MONTH_NAMES[date.getMonth()]} ${date.getDate()}`,\n\t\tdateString: (date) => `${DAY_NAMES[date.getDay()]}, ${date.getDate()} ${MONTH_NAMES[date.getMonth()]} ${date.getFullYear()}`,\n\t\tdateStringTitle: (date) => `${date.getDate()} ${MONTH_NAMES[date.getMonth()]} ${date.getFullYear()}`,\n\t},\n};\n\nexport function dateString(timestamp, dateType, timezoneOffset) {\n\tconst date = new Date(timestamp);\n\tconst result = {\n\t\tdayString: `${MONTH_NAMES[date.getMonth()]} ${date.getDate()}`,\n\t\tdateString: `${DAY_NAMES[date.getDay()]}, ${date.getDate()} ${MONTH_NAMES[date.getMonth()]} ${date.getFullYear()}`,\n\t\tdateStringTitle: `${date.getDate()} ${MONTH_NAMES[date.getMonth()]} ${date.getFullYear()}`,\n\t\tdate: date,\n\t\ttimestamp: timestamp,\n\t};\n\tif (dateType) {\n\t\tresult.dayString = dateType.dayString(date);\n\t\tresult.dateString = dateType.dateString(date);\n\t\tresult.dateStringTitle = dateType.dateStringTitle(date);\n\t}\n\treturn result;\n}\n\nexport function createPercentDefaultHandler(data) {\n\treturn function percentageDefaultHandler(timestamp) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tresolve(data);\n\t\t});\n\t}\n}\n\nexport function prepareDataset(data, config) {\n\tconst { title, columns, types, colors, names } = data; // main data\n\tconst { percentage, stacked, y_scaled, x_on_zoom } = data; // options\n\n\tconst [[xAxisKey, ...rawXAxis], ...rawYAxisList] = columns;\n\tconst xDiff = rawXAxis[1] - rawXAxis[0];\n\tconst xAxis = rawXAxis.map(el => dateString(el, DATE_TYPES[xDiff]));\n\tconst yAxis = prepareYAxis(rawYAxisList, data, config);\n\n\treturn {\n\t\ttitle, columns, types, colors, names,\n\n\t\tx_on_zoom: (percentage && !x_on_zoom) ? createPercentDefaultHandler(data) : x_on_zoom,\n\t\tpercentage, stacked, y_scaled,\n\n\t\txAxis, yAxis,\n\t};\n}\n\n\nexport function prepareYAxis(rawYs, data, config) {\n\tconst items = rawYs.map(y => {\n\t\tconst [yKey, ...yData] = y;\n\t\tconst item = {\n\t\t\topacity: config.animator.createAnimation(1, ANIMATION_SPEED),\n\t\t\tkey: yKey,\n\t\t\tscaling: {},\n\t\t\tenabled: true,\n\t\t\titems: yData,\n\t\t};\n\n\t\tif (data.y_scaled) {\n\t\t\titem.scaling.color = data.colors[item.key];\n\t\t\titem.scaling.minHeight = uninf(singleMin(item.items));\n\t\t\titem.scaling.maxHeight = uninf(singleMax(item.items));\n\t\t\titem.scaling.minHeightAnim = config.animator.createAnimation(0, ANIMATION_SPEED);\n\t\t\titem.scaling.maxHeightAnim = config.animator.createAnimation(0, ANIMATION_SPEED);\n\t\t\titem.scaling.normY = normalizeAnimated(config.animator, item.scaling.minHeight, item.scaling.maxHeight);\n\t\t\titem.scaling.normControlY = normalizeAnimated(config.animator, item.scaling.minHeight, item.scaling.maxHeight);\n\n\t\t\titem.scaling.updateMinMax = function updateMinMax(startIndex, endIndex) {\n\t\t\t\titem.scaling.minHeight = uninf(singleMinRange(item.items, startIndex, endIndex));\n\t\t\t\titem.scaling.maxHeight = uninf(singleMaxRange(item.items, startIndex, endIndex));\n\t\t\t\titem.scaling.minHeightAnim.play(item.scaling.minHeight);\n\t\t\t\titem.scaling.maxHeightAnim.play(item.scaling.maxHeight);\n\t\t\t\titem.scaling.normY.updateDelta(item.scaling.minHeight, item.scaling.maxHeight);\n\t\t\t}\n\t\t}\n\n\t\treturn item;\n\t});\n\n\tif (!data.y_scaled) {\n\t\tconst sharedScaling = {};\n\n\t\tif (data.percentage) {\n\t\t\tscaling_Percentage(config, sharedScaling, items);\n\t\t} else if (data.stacked) {\n\t\t\tscaling_Stacked(config, sharedScaling, items);\n\t\t} else {\n\t\t\tscaling_Default(config, sharedScaling, items);\n\t\t}\n\n\t\titems.forEach(item => { item.scaling = sharedScaling; })\n\t}\n\n\n\treturn {\n\t\titems: items,\n\t}\n}\n\n\n\nfunction scaling_Percentage(config, sharedScaling, items) {\n\t// PERCENTAGE\n\tconst minHeight = 0;\n\tconst maxHeight = 100;\n\tconst minHeightAnim = config.animator.createAnimation(minHeight, ANIMATION_SPEED);\n\tconst maxHeightAnim = config.animator.createAnimation(maxHeight, ANIMATION_SPEED);\n\n\tsharedScaling.minHeight = minHeight;\n\tsharedScaling.maxHeight = maxHeight;\n\tsharedScaling.minHeightAnim = minHeightAnim;\n\tsharedScaling.maxHeightAnim = maxHeightAnim;\n\tsharedScaling.normY = normalizeAnimated(config.animator, minHeight, maxHeight);\n\tsharedScaling.normControlY = normalizeAnimated(config.animator, minHeight, maxHeight);\n\n\tsharedScaling.updateMinMax = function updateMinMax(startIndex, endIndex) {};\n}\n\n\nfunction scaling_Stacked(config, sharedScaling, items) {\n\t// STACKED\n\tconst rawItems = items.map(f => f.items);\n\tconst min = 0;\n\tconst max = uninf(singleMax(zipSum(rawItems)));\n\tconst minHeight = 0;\n\tconst maxHeight = singleMaxRange(zipSum(rawItems), min, max);\n\tconst minHeightAnim = config.animator.createAnimation(0, ANIMATION_SPEED);\n\tconst maxHeightAnim = config.animator.createAnimation(0, ANIMATION_SPEED);\n\n\tsharedScaling.minHeight = minHeight;\n\tsharedScaling.maxHeight = maxHeight;\n\tsharedScaling.minHeightAnim = minHeightAnim;\n\tsharedScaling.maxHeightAnim = maxHeightAnim;\n\tsharedScaling.normY = normalizeAnimated(config.animator, minHeight, maxHeight);\n\tsharedScaling.normControlY = normalizeAnimated(config.animator, 0, max);\n\n\tfunction updateMinMax(startIndex, endIndex) {\n\t\t// console.log('UPD MIN')\n\t\tconst filteredRawItems = items.filter(y => y.enabled).map(y => y.items);\n\t\tsharedScaling.minHeight = 0;\n\t\ttry {\n\t\t\tsharedScaling.maxHeight = uninf(singleMaxRange(zipSum(filteredRawItems), startIndex, endIndex));\n\t\t} catch(err) {\n\t\t\treturn;\n\t\t}\n\t\tsharedScaling.minHeightAnim.play(sharedScaling.minHeight);\n\t\tsharedScaling.maxHeightAnim.play(sharedScaling.maxHeight);\n\t\tsharedScaling.normY.updateDelta(sharedScaling.minHeight, sharedScaling.maxHeight);\n\n\t\tconst min = 0;\n\t\tconst max = uninf(singleMax(zipSum(filteredRawItems)));\n\t\tsharedScaling.normControlY.updateDelta(min, max);\n\t}\n\n\tsharedScaling.updateMinMax = updateMinMax;\n}\n\n\nfunction scaling_Default(config, sharedScaling, items) {\n\tconst rawItems = items.map(f => f.items);\n\n\tconst min = uninf(flatMin(rawItems));\n\tconst max = uninf(flatMax(rawItems));\n\tconst minHeight = flatMin(rawItems, min, max);\n\tconst maxHeight = flatMax(rawItems, min, max);\n\tconst minHeightAnim = config.animator.createAnimation(0, ANIMATION_SPEED);\n\tconst maxHeightAnim = config.animator.createAnimation(0, ANIMATION_SPEED);\n\n\tsharedScaling.minHeight = minHeight;\n\tsharedScaling.maxHeight = maxHeight;\n\tsharedScaling.minHeightAnim = minHeightAnim;\n\tsharedScaling.maxHeightAnim = maxHeightAnim;\n\tsharedScaling.normY = normalizeAnimated(config.animator, minHeight, maxHeight);\n\tsharedScaling.normControlY = normalizeAnimated(config.animator, min, max);\n\n\tfunction updateMinMax(startIndex, endIndex) {\n\t\t// console.log('UPD MIN')\n\t\tconst filteredRawItems = items.filter(y => y.enabled).map(y => y.items);\n\t\tsharedScaling.minHeight = uninf(flatMinRange(filteredRawItems, startIndex, endIndex));\n\t\tsharedScaling.maxHeight = uninf(flatMaxRange(filteredRawItems, startIndex, endIndex));\n\t\tsharedScaling.minHeightAnim.play(sharedScaling.minHeight);\n\t\tsharedScaling.maxHeightAnim.play(sharedScaling.maxHeight);\n\t\tsharedScaling.normY.updateDelta(sharedScaling.minHeight, sharedScaling.maxHeight);\n\n\t\tconst min = uninf(flatMin(filteredRawItems));\n\t\tconst max = uninf(flatMax(filteredRawItems));\n\t\tsharedScaling.normControlY.updateDelta(min, max);\n\t}\n\n\tsharedScaling.updateMinMax = updateMinMax;\n}","export function createElement(parent, elementTag, className) {\n\tconst element = document.createElement(elementTag);\n\telement.className = className;\n\tif (parent) {\n\t\tparent.appendChild(element);\n\t}\n\treturn element;\n}\n\nexport function createLongPress(button, handlePress, handleLongPress) {\n\tlet timeout = null;\n\tlet dropClick = false;\n\n\tfunction mouseUp() {\n\t\tclearTimeout(timeout);\n\t\tif (dropClick) {\n\t\t\tdropClick = false;\n\t\t\treturn;\n\t\t}\n\n\t\thandlePress && handlePress();\n\t}\n\n\tfunction mouseDown() {\n\t\ttimeout = setTimeout(() => {\n\t\t\thandleLongPress && handleLongPress();\n\t\t\tdropClick = true;\n\t\t}, 200);\n\t}\n\n\tfunction mouseMove() {\n\t\tclearTimeout(timeout);\n\t}\n\n\tfunction init() {\n\t\tbutton.addEventListener('click', mouseUp);\n\t\tbutton.addEventListener('mousedown', mouseDown);\n\t\tbutton.addEventListener('mousemove', mouseMove);\n\t\tbutton.addEventListener('touchstart', mouseDown);\n\t\tbutton.addEventListener('touchmove', mouseMove);\n\t}\n\n\tfunction destroy() {\n\t\tbutton.removeEventListener('click', mouseUp);\n\t\tbutton.removeEventListener('mousedown', mouseDown);\n\t\tbutton.removeEventListener('mousemove', mouseMove);\n\t\tbutton.removeEventListener('touchstart', mouseDown);\n\t\tbutton.removeEventListener('touchmove', mouseMove);\n\t}\n\n\tinit();\n\n\treturn {\n\t\tinit, destroy,\n\t};\n}","import { createElement } from './utils';\nimport { formatNumber } from '../utils';\n\nexport function createPopupHeader(title, widthArrow) {\n\treturn `\n\t\t<strong class=\"chart__popup-header\">\n\t\t\t<span class=\"chart__popup-header-title\">${title}</span>\n\t\t\t${widthArrow ? '<span class=\"chart__popup-header-icon\"></span>' : '<span></span>'}\n\t\t</strong>\n\t`;\n}\n\n\nexport function createPopupItem(color, title, value) {\n\treturn `\n\t\t<span class=\"chart__popup-item\">\n\t\t\t<span class=\"chart__popup-item-title\">${title}</span>\n\t\t\t<span class=\"chart__popup-item-value\" style=\"color: ${color}\">${formatNumber(value)}</span>\n\t\t</span>\n\t`;\n}\n\n\nexport function createPopup(container, config) {\n\tconst popup = createElement(container, 'div', 'chart__popup');\n\tconst clickHandlers = [];\n\tlet currentIndex = -1;\n\n\tpopup.addEventListener('click', () => {\n\t\tif (config.data.xAxis[currentIndex]) {\n\t\t\tfor (let i = 0; i < clickHandlers.length; i++) {\n\t\t\t\tclickHandlers[i](config.data.xAxis[currentIndex].timestamp);\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction changeHtml(index) {\n\t\tconst filtered = config.data.yAxis.items.filter(y => y.enabled)\n\t\tconst curr = filtered.map(y => createPopupItem(config.data.colors[y.key], config.data.names[y.key], y.items[index]));\n\t\tif (!curr.length) return;\n\t\tpopup.innerHTML = `\n\t\t\t${createPopupHeader(config.data.xAxis[index].dateString, config.data.x_on_zoom)}\n\t\t\t${curr.join('')}\n\t\t`;\n\t}\n\n\tconst publicInterface = {\n\t\telement: popup,\n\t\tupdate: changeHtml,\n\t\tshow(index) {\n\t\t\tcurrentIndex = index;\n\t\t\tchangeHtml(index);\n\t\t\tpopup.style.opacity = 1;\n\t\t\tpopup.style.visibility = 'visible';\n\t\t},\n\t\thide() {\n\t\t\tcurrentIndex = -1;\n\t\t\tpopup.style.opacity = 0;\n\t\t\tpopup.style.visibility = 'hidden';\n\t\t},\n\t\tonClick(handler) {\n\t\t\tclickHandlers.push(handler);\n\t\t}\n\t};\n\n\treturn publicInterface;\n}","import { createElement } from './utils';\n\n\nexport function createHeader(container, titleText, subtitleText) {\n\tconst header = createElement(container, 'div', 'chart__header');\n\n\tconst title = createElement(header, 'h2', 'chart__header-title');\n\ttitle.textContent = titleText;\n\n\tconst subtitle = createElement(header, 'h3', 'chart__header-sub-title');\n\tsubtitle.textContent = subtitleText;\n\n\tlet isSubtitleFreezed = false;\n\n\treturn {\n\t\tsetTitle(titleText) {\n\t\t\ttitle.textContent = titleText;\n\t\t},\n\t\tsetTitleButton(titleText, onClick) {\n\t\t\tfunction buttonClickHandler(e) {\n\t\t\t\tonClick && onClick(e);\n\t\t\t\tbutton.removeEventListener('click', buttonClickHandler);\n\t\t\t}\n\t\t\tconst button = createElement(null, 'span', 'chart__header-title-button')\n\t\t\tbutton.textContent = titleText;\n\t\t\tbutton.addEventListener('click', buttonClickHandler);\n\t\t\ttitle.innerHTML = '';\n\t\t\ttitle.appendChild(button);\n\t\t},\n\t\tsetSubtitle(subtitleText) {\n\t\t\tif (isSubtitleFreezed) return;\n\t\t\tsubtitle.textContent = subtitleText;\n\t\t},\n\t\tfreezeSubtitle(subtitleText) {\n\t\t\tisSubtitleFreezed = true;\n\t\t},\n\t\tunfreezeSubtitle() {\n\t\t\tisSubtitleFreezed = false;\n\t\t}\n\t}\n}","import { createElement, createLongPress } from './utils';\n\n\nexport function createButtonForAxis(container, config, y, globState, handler) {\n\tconst key = y.key;\n\tconst state = {\n\t\tkey: key,\n\t\tenabled: true,\n\t};\n\tconst button = createElement(container, 'button', 'chart__buttons-button');\n\tbutton.textContent = config.data.names[key];\n\tbutton.style.backgroundColor = config.data.colors[key];\n\tbutton.style.borderColor = config.data.colors[key];\n\tconst longPress = createLongPress(button, onPress, onLongPress);\n\n\tfunction destroy() {\n\t\tcontainer && container.removeChild(button);\n\t\tlongPress.destroy();\n\t}\n\n\tfunction init() {\n\t\tcontainer && container.appendChild(button);\n\t\tlongPress.init();\n\t}\n\n\tfunction onPress() {\n\t\tif (globState.activeButtonsCount === 1 && state.enabled) {\n\t\t\tbutton.className = 'chart__buttons-button error';\n\t\t\tsetTimeout(() => {button.className = 'chart__buttons-button';}, 140)\n\t\t\treturn;\n\t\t}\n\n\t\tstate.enabled = !state.enabled;\n\t\tupdate();\n\t}\n\n\tfunction onLongPress() {\n\t\tstate.show();\n\t\tglobState.hideAllExcept(button);\n\t}\n\t\n\tfunction update(force) {\n\t\tif (state.enabled === true) {\n\t\t\tbutton.className = 'chart__buttons-button';\n\t\t\tbutton.style.color = '#FFF';\n\t\t} else {\n\t\t\tbutton.className = 'chart__buttons-button unchecked';\n\t\t\tbutton.style.color = config.data.colors[key];\n\t\t}\n\n\t\tconst shouldCallUpdateHandler = y.enabled !== state.enabled;\n\t\ty.enabled = state.enabled;\n\t\tif (force) {\n\t\t\ty.opacity.value = state.enabled ? 0.99 : 0.01;\n\t\t}\n\t\ty.opacity.play(state.enabled ? 1 : 0);\n\n\t\tshouldCallUpdateHandler && handler && handler(state.enabled);\n\t}\n\n\tfunction hide(caller) {\n\t\tif (state.enabled && caller !== button) {\n\t\t\tstate.enabled = false;\n\t\t\tupdate();\n\t\t}\n\t}\n\n\tfunction show() {\n\t\tif (!state.enabled) {\n\t\t\tstate.enabled = true;\n\t\t\tupdate();\n\t\t}\n\t}\n\n\tstate.update = update;\n\tstate.hide = hide;\n\tstate.show = show;\n\n\tstate.destroy = destroy;\n\tstate.init = init;\n\n\treturn state;\n}\n\nexport function createButtons(container, config, handler) {\n\tconst globalState = {\n\t\tactiveButtonsCount: config.data.yAxis.items.length,\n\n\t\thideAllExcept: hideAllExcept,\n\t\thideAll: hideAll,\n\t};\n\n\n\tconst buttonsWrapper = createElement(container, 'div', 'chart__buttons');\n\tconst allButtons = {};\n\n\tconst buttons = config.data.yAxis.items.map(y => {\n\t\tconst button = createButtonForAxis(config.data.yAxis.items.length > 1 ? buttonsWrapper : null, config, y, globalState, (enabled) => {\n\t\t\tglobalState.activeButtonsCount += enabled ? 1 : -1;\n\t\t\tif (globalState.activeButtonsCount < 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thandler && handler();\n\t\t});\n\t\treturn allButtons[y.key] = button;\n\t});\n\n\tfunction hideAll() {\n\t\tbuttons.forEach(button => {\n\t\t\tbutton.hide();\n\t\t});\n\t}\n\n\tfunction hideAllExcept(caller) {\n\t\tbuttons.forEach(button => {\n\t\t\tbutton.hide(caller);\n\t\t});\n\t}\n\n\tfunction destroy() {\n\t\tbuttons.map(button => button.destroy());\n\t\tcontainer.removeChild(buttonsWrapper);\n\t}\n\n\tfunction init() {\n\t\tbuttons.map(button => button.init());\n\t\tcontainer.appendChild(buttonsWrapper);\n\t}\n\n\tallButtons.mergeState = function mergeState(oldButtons) {\n\t\tbuttons.map(button => {\n\t\t\t// config.control.shouldUpdate = true;\n\t\t\t// config.chart.shouldUpdate = true;\n\t\t\t// button.update(true);\n\n\t\t\tconfig.control.shouldUpdate = true;\n\t\t\tconfig.chart.shouldUpdate = true;\n\t\t\tif (oldButtons[button.key]) {\n\t\t\t\tbutton.enabled = buttons.length > 1 ? oldButtons[button.key].enabled : true;\n\t\t\t}\n\t\t\tbutton.update(true);\n\t\t})\n\t}\n\n\tallButtons.destroy = destroy;\n\tallButtons.init = init;\n\n\treturn allButtons;\n}","import { PIXEL_RATIO } from '../../Globals';\n\n\nexport default function  Bar({ config, normYKey }, opts = {}) {\n\tconst { ctx, control, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst chunkScale = config.scaleX;\n\n\tconst draws = {\n\t\titems: [],\n\t\twidth: 0,\n\t\topacity: 1.0,\n\n\t\toffsetIndex: 0,\n\t}\n\n\tlet prevWidth = 0;\n\n\tfunction shouldBulkRecalculate(yAxis) {\n\t\tlet result = false;\n\t\tif (prevWidth !== ctx.canvas.width) {\n\t\t\tprevWidth = ctx.canvas.width;\n\t\t\treturn true;\n\t\t}\n\t\tfor (let i = 0; i < yAxis.items.length; i++) {\n\t\t\tif (result = yAxis.items[i].opacity.inProgress\n\t\t\t\t|| !yAxis.items[i].calculated\n\t\t\t) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction shouldRecalculate(data) {\n\t\treturn true;\n\t}\n\n\tfunction calculate(data, stacked, x, y, width, height) {\n\t\tconst { key, items, opacity } = data;\n\t\tconst normY = data.scaling[normYKey];\n\t\tdraws.opacity = opacity.value;\n\t\t\n\t\tif (!draws.opacity) return;\n\t\tif (draws.opacity < 1) {\n\t\t\tconfig.control.shouldUpdate = true;\n\t\t}\n\n\t\tdraws.items = [];\n\t\tdraws.offsetIndex = 0;\n\t\tdraws.width = chunkScale * width;\n\n\t\tconst WIDTH = (width - draws.width);\n\t\tdraws.width = chunkScale * WIDTH;\n\t\tconst count = items.length;\n\t\tconst chunkSize = chunkScale * WIDTH;\n\t\tconst chunk_2 = chunkSize / 2;\n\t\tconst startBreakpoint = -chunkSize;\n\t\tconst endBreakpoint = ctx.canvas.width + count;\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tstacked[i] += items[i] * draws.opacity;\n\t\t\tconst X = x + chunkSize * i + chunk_2;\n\t\t\tconst Y = y + height - normY(stacked[i]) * height;\n\t\t\tconst BAR_HEIGHT = normY(items[i]) * height * draws.opacity;\n\t\t\t\n\t\t\tif (X < startBreakpoint) {\n\t\t\t\tdraws.offsetIndex++;\n\t\t\t\tcontinue;\n\t\t\t} else if (X > endBreakpoint) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdraws.items.push([X, Y, Y + BAR_HEIGHT]);\n\t\t}\n\n\t\tdata.calculated = true;\n\t}\n\n\tfunction drawBar(data, stacked, x, y, width, height, activeIndex) {\n\n\t\tconst { key } = data;\n\t\tconst { items, opacity } = draws;\n\n\t\tif (!opacity) return;\n\t\tconst count = items.length;\n\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.lineWidth = draws.width;\n\t\tctx.strokeStyle = colors[key];\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tconst isHovered = activeIndex === i + draws.offsetIndex;\n\t\t\tif (isHovered) {\n\t\t\t\tctx.globalAlpha = 0.5;\n\t\t\t\tctx.stroke();\n\t\t\t\tctx.globalAlpha = 1;\n\t\t\t\tctx.beginPath();\n\t\t\t}\n\t\t\tctx.moveTo(items[i][0], items[i][1]);\n\t\t\tctx.lineTo(items[i][0], items[i][2]);\n\t\t\tif (isHovered) {\n\t\t\t\tctx.stroke();\n\t\t\t\tctx.globalAlpha = 0.5;\n\t\t\t\tctx.beginPath();\n\t\t\t}\n\t\t}\n\t\tctx.stroke();\n\t\tctx.restore();\n\t}\n\n\treturn {\n\t\tshouldBulkRecalculate: shouldBulkRecalculate,\n\t\tshouldRecalculate: shouldRecalculate,\n\t\tcalculate: calculate,\n\t\tdraw: drawBar,\n\t};\n}","import { throttle } from '../../utils';\nimport { PI2, ONE, TWO, CURRENT, DOT_RADIUS, PIXEL_RATIO } from '../../Globals';\n\nconst SIDE_LEFT = 1;\nconst SIDE_CENTER = 2;\nconst SIDE_RIGHT = 3;\n\nexport function createMouseDotHandling(config, { paddingLeftSelector, paddingRightSelector, rounding, plus }) {\n\tconst { ctx } = config;\n\tconst mouse = config.mouse.mouse;\n\tconst popup = config.popup;\n\tconst chunkScale = config.scaleX;\n\n\n\tconst current = {\n\t\tx: 0,\n\t\ty: 0,\n\t\twidth: 0,\n\t\theight: 0,\n\n\t\tindexOld: -1,\n\t\tindex: -1,\n\t};\n\n\tconst context = {\n\t\tcount: 0,\n\t\tchunkScale: config.scaleX,\n\t\tchunkSize: chunkScale * current.width,\n\t\tchunkSizeDiv2: chunkScale * current.width / 2,\n\n\t\tonCanvasOld: false,\n\t\tonCanvas: false,\n\t\tpopupSide: 1,\n\n\t\tcurrent: current,\n\t};\n\n\tlet TOUCHED = false;\n\t\n\n\tconst handleOver = throttle((mouse, e) => {\n\t\t// Check if mouse on canvas container\n\t\tcontext.onCanvasOld = context.onCanvas;\n\t\tcontext.onCanvas = (ctx.canvas === e.target || ctx.canvas.nextSibling.contains(e.target));\n\t\tif ((!context.onCanvas && context.onCanvasOld) || e.target.tagName === 'BUTTON') {\n\t\t\tif (current.index !== -1) {\n\t\t\t\tconfig.chart.shouldUpdate = true;\n\t\t\t}\n\t\t\tcurrent.index = -1;\n\t\t\tpopup.hide();\n\t\t}\n\n\t\tif (!context.onCanvas) return;\n\t\tif (e.target !== ctx.canvas) return;\n\n\t\tif (context.onCanvas || (context.onCanvasOld === true && context.onCanvas === false)) {\n\t\t\tcurrent.indexOld = current.index;\n\t\t\tif (mouse.newY > current.y && mouse.newY < current.y + current.height) {\n\t\t\t\tcurrent.index = context.count - rounding((current.width + current.x - mouse.newX) / context.chunkSize + plus);\n\t\t\t\tif (current.index < context.count && current.index >= 0) {\n\t\t\t\t\tpopup.show(current.index);\n\t\t\t\t} else {\n\t\t\t\t\tcurrent.index = -1;\n\t\t\t\t\tpopup.hide();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcurrent.index = -1;\n\t\t\t\tpopup.hide();\n\t\t\t}\n\t\t}\n\n\t\tif (current.indexOld !== current.index) {\n\t\t\tconfig.chart.shouldUpdate = true;\n\n\t\t\tif (current.index !== -1) {\n\t\t\t\tconst popupBounds = popup.element.getBoundingClientRect();\n\t\t\t\tconst currentPos = (current.index * context.chunkSize + current.x) / PIXEL_RATIO;\n\t\t\t\tconst paddingLeft = paddingRightSelector(context) / PIXEL_RATIO;\n\t\t\t\tconst paddingRight = paddingLeftSelector(context) / PIXEL_RATIO;\n\n\t\t\t\tconst leftOverflow = (currentPos + popupBounds.width + paddingRight);\n\t\t\t\tconst rightOverflow = (currentPos - popupBounds.width - paddingRight);\n\t\t\t\tif (leftOverflow > config.canvasBounds.width / PIXEL_RATIO) {\n\t\t\t\t\tcontext.popupSide = SIDE_LEFT;\n\t\t\t\t} else if (rightOverflow < 0) {\n\t\t\t\t\tcontext.popupSide = SIDE_RIGHT;\n\t\t\t\t}\n\n\t\t\t\tif (context.popupSide === SIDE_LEFT) {\n\t\t\t\t\tpopup.element.style.left = `${currentPos - popupBounds.width - paddingLeft}px`;\n\t\t\t\t} else if (context.popupSide === SIDE_RIGHT) {\n\t\t\t\t\tpopup.element.style.left = `${currentPos + paddingRight}px`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent.indexOld = current.index;\n\t\t}\n\t}, 50);\n\n\tconst moveHandler = (mouse, e) => { TOUCHED && handleOver(mouse, e); };\n\tconst downHandler = (mouse, e) => { TOUCHED = true; handleOver(mouse, e); };\n\tconst   upHandler = (mouse, e) => { TOUCHED = false; };\n\n\tcontext.destroy = function destroy() {\n\t\tconfig.mouse.removeListener('move', moveHandler);\n\t\tconfig.mouse.removeListener('down', downHandler);\n\t\tconfig.mouse.removeListener('up', upHandler);\n\n\t\tcurrent.indexOld = -1;\n\t\tcurrent.index = -1;\n\t}\n\n\tcontext.init = function init() {\n\t\tconfig.mouse.addListener('move', moveHandler);\n\t\tconfig.mouse.addListener('down', downHandler);\n\t\tconfig.mouse.addListener('up', upHandler);\n\t}\n\n\tcontext.init();\n\n\treturn context;\n}","import { throttle } from '../../utils';\nimport { CURRENT } from '../../Globals';\n\nimport { createMouseDotHandling } from './utils';\n\n\nexport default function BarDots({ config, normYKey }) {\n\tconst { ctx, control, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst h = createMouseDotHandling(\n\t\tconfig,\n\t\t{\n\t\t\tpaddingLeftSelector: (context) => context.chunkSize + (context.chunkSizeDiv2 > 10 ? 10 : context.chunkSizeDiv2),\n\t\t\tpaddingRightSelector: (context) => context.chunkSizeDiv2 > 10 ? 10 : context.chunkSizeDiv2,\n\t\t\trounding: Math.ceil,\n\t\t\tplus: 0\n\t\t}\n\t);\n\n\tfunction destroy() {\n\t\th.destroy();\n\t}\n\n\tfunction init() {\n\t\th.init();\n\t}\n\n\tfunction drawBarDots(items, stacked, x, y, width, height) {\n\t\th.current.width = width;\n\t\th.current.height = height;\n\t\th.current.x = x;\n\t\th.current.y = y;\n\n\t\tconst WIDTH = width - h.chunkSize;\n\n\t\th.count = items.length;\n\t\th.chunkSize = h.chunkScale * WIDTH;\n\t\th.chunkSizeDiv2 = h.chunkSize / 2;\n\n\t\treturn h.current.index;\n\t}\n\n\tdrawBarDots.destroy = destroy;\n\tdrawBarDots.init = init;\n\n\treturn drawBarDots;\n}","import {\n\tFONT,\n\tCURRENT,\n\tPIXEL_RATIO,\n\tY_AXIS_TEXT_PADDING,\n} from '../../Globals';\nimport { formatNumber } from '../../utils';\n\n\nexport default function YAxis({ config }, opts = {}) {\n\tconst { ctx, control, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst partsCount = 6;\n\tconst textAlign = opts.textAlign || 'left';\n\t\n\treturn function drawYAxis(data, x, y, width, height, drawLine, separateAxis) {\n\t\tconst min = Math.round(data.scaling.minHeightAnim.value);\n\t\tconst max = Math.round(data.scaling.maxHeightAnim.value);\n\t\tconst opacity = data.opacity.value;\n\t\tconst a = height / partsCount;\n\t\tconst part = (height + a/2) / partsCount;\n\t\tconst partNumber = Math.ceil((max - min) / partsCount);\n\n\t\tctx.save();\n\t\tctx.beginPath();\n\n\t\t// ctx.fillStyle = '#182D3B';\n\t\tctx.fillStyle = data.scaling.color || CURRENT.THEME.gridLines;\n\t\tif (separateAxis) {\n\t\t\tctx.globalAlpha = opacity / 2;\n\t\t} else {\n\t\t\tctx.globalAlpha = data.scaling.color ? 0.8 : 0.5;\n\t\t}\n\n\t\tctx.font = FONT;\n\t\tctx.textBaseline = 'bottom';\n\t\tctx.textAlign = textAlign;\n\t\tfor (let i = 0; i < partsCount; i++) {\n\t\t\tif (drawLine) {\n\t\t\t\tctx.moveTo(x, y + height - i * part);\n\t\t\t\tctx.lineTo(x + width, y + height - i * part);\n\t\t\t}\n\t\t\tconst number = formatNumber(min + partNumber * i, true);\n\t\t\tctx.fillText(number, x + 3, y + height - i * part - Y_AXIS_TEXT_PADDING);\n\t\t}\n\n\t\tctx.lineWidth = 1 * PIXEL_RATIO;\n\t\tif (drawLine) {\n\t\t\tctx.globalAlpha = 0.1;\n\t\t\t// ctx.strokeStyle = '#182D3B';\n\t\t\tctx.strokeStyle = CURRENT.THEME.gridLines;\n\t\t\tctx.stroke();\n\t\t}\n\t\tctx.restore();\n\t}\n}","import { memo, normalize, normalizeMemo } from '../../utils';\nimport {\n\tFONT,\n\tCURRENT,\n\tAXIS_TEXT_WIDTH,\n\tX_AXIS_HEIGHT_DIV_2,\n\tAXIS_TEXT_WIDTH_DIV_2,\n} from '../../Globals';\n\n\nconst steps = [0, 1, 2, 4, 4, 8, 8, 8, 8, 16, 16, 16, 16, 16, 16, 16, 16, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64];\n\nexport default function XAxis({ config, forBars }) {\n\tconst { ctx, control, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tlet deepness = 0;\n\tconst chunkScale = config.scaleX;\n\tlet chunkSize = 0;\n\n\treturn function drawXAxis(items, x, y, width, height) {\n\t\tconst count = items.length;\n\t\tif (forBars) {\n\t\t\tchunkSize = chunkScale * (width - chunkScale * width);\n\t\t} else {\n\t\t\tchunkSize = chunkScale * width;\n\t\t}\n\n\t\tif (forBars) {\n\t\t\twidth = width - chunkSize;\n\t\t}\n\n\t\tctx.save();\n\n\t\t// ctx.fillStyle = '#182D3B'\n\t\tctx.fillStyle = CURRENT.THEME.gridLines;\n\t\tctx.font = FONT;\n\t\tctx.textAlign = 'center';\n\t\tctx.textBaseline = 'middle';\n\t\tctx.globalAlpha = 0.5;\n\n\t\tconst currRaw = width * chunkScale;\n\t\tconst curr = Math.floor(currRaw);\n\t\tconst step = Math.ceil(AXIS_TEXT_WIDTH / currRaw);\n\t\tconst nextStep = step + 1;\n\t\tconst realStep = steps[step];\n\t\tconst nextRealStep = steps[nextStep];\n\n\t\tconst breakPoint = currRaw;\n\t\tconst currItemWidth = AXIS_TEXT_WIDTH / step;\n\t\tconst fade = breakPoint / currItemWidth;\n\t\tconst alpha = (fade - 1) * (step);\n\n\t\tfor (let i = 0; i < count; i += realStep) {\n\t\t\tconst ost = i % nextRealStep;\n\t\t\tif (ost === 0) {\n\t\t\t\tctx.globalAlpha = 0.5;\n\t\t\t} else {\n\t\t\t\tif (alpha > 0.5) {\n\t\t\t\t\tctx.globalAlpha = 0.5;\n\t\t\t\t} else {\n\t\t\t\t\tctx.globalAlpha = alpha;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst X = x + (forBars ? chunkSize / 2 : 0) + chunkSize * i;\n\t\t\tconst Y = y + X_AXIS_HEIGHT_DIV_2;\n\t\t\tif (X < -AXIS_TEXT_WIDTH || X > ctx.canvas.width + AXIS_TEXT_WIDTH) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tctx.fillText(items[i].dayString, X, Y);\n\t\t}\n\n\t\tctx.restore();\n\t}\n}","import {\n\tPIXEL_RATIO,\n\tBOTTOM_PADDING,\n\tX_AXIS_HEIGHT,\n\tONE,\n\tTWO,\n\tDOT_RADIUS,\n\tDOT_RADIUS_DIV_2,\n\tDOT_RADIUS_MUL_2,\n} from '../../Globals';\n\nimport BarLayerDrawer from '../Layers/Bar';\nimport BarActivePopup from '../Layers/BarActivePopup';\nimport YAxisLayerDrawer from '../Layers/YAxis';\nimport XAxisLayerDrawer from '../Layers/XAxis';\n\nimport { debugLayer } from '../utils';\n\n\nexport default function BarChartDrawer(drawersArgs) {\n\tconst { config } = drawersArgs;\n\tconst { ctx, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst chartPadding = 6 * PIXEL_RATIO;\n\tconst chartPadding2 = chartPadding * 2;\n\n\tconst drawBarLayer  = BarLayerDrawer(drawersArgs);\n\tconst calculateActiveBarIndex  = BarActivePopup(drawersArgs);\n\tconst drawXAxisLayer = XAxisLayerDrawer({...drawersArgs, forBars: true});\n\tconst drawYAxisLayer = YAxisLayerDrawer(drawersArgs, {\n\t\ttextAlign: 'left',\n\t});\n\n\tfunction destroy() {\n\t\tcalculateActiveBarIndex.destroy();\n\t}\n\n\tfunction init() {\n\t\tcalculateActiveBarIndex.init();\n\t}\n\n\tfunction drawChart(x, y, width, height) {\n\t\t// debugLayer(ctx, x, y, width, height);\n\n\t\tconst XS = width * config.control.range[0];\n\t\tconst xRanged = x - XS / config.control.scale;\n\t\tconst widthRanged = width / config.control.scale;\n\n\t\tconst HEIGHT = height - BOTTOM_PADDING - DOT_RADIUS_MUL_2;\n\t\tconst Y = y + TWO;\n\n\t\t// Draw layers\n\t\tconst stacked = new Array(xAxis.length).fill(0);\n\t\tconst currentActiveIndex = calculateActiveBarIndex(xAxis, stacked, xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT);\n\t\tfor (let i = 0; i < yAxis.items.length; i++) {\n\t\t\tdrawBarLayer.calculate(yAxis.items[i], stacked, xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT);\n\t\t\tdrawBarLayer.draw(yAxis.items[i], stacked, xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT, currentActiveIndex);\n\t\t}\n\t\t\n\t\tdrawXAxisLayer(xAxis, xRanged, y + HEIGHT - X_AXIS_HEIGHT, widthRanged, X_AXIS_HEIGHT);\n\t\tdrawYAxisLayer(yAxis.items[0], x, Y, width, HEIGHT - X_AXIS_HEIGHT, true);\n\t}\n\n\tdrawChart.destroy = destroy;\n\tdrawChart.init = init;\n\n\treturn drawChart;\n}","import { PIXEL_RATIO, CURRENT, ONE } from '../../Globals';\n\nexport const NONE = 0;\nexport const DRAG_START = 1;\nexport const DRAG_END = 2;\nexport const DRAG_ALL = 3;\n\nexport const pipaH = 10 * PIXEL_RATIO;\nexport const pipaH2 = pipaH / 2;\nexport const controlWidth = 10 * PIXEL_RATIO;\nexport const controlWidthMul2 = controlWidth * 2;\nexport const controlWidthDiv2 = controlWidth / 2;\nexport const controlWidthDiv13 = controlWidth - controlWidth / 3;\nexport const controlPipaWidth = 2 * PIXEL_RATIO;\nexport const controlPipaPos = (controlWidth - controlPipaWidth) / 2;\n\n\nexport function createControlLayer(config) {\n\tconst OPTS = {\n\t\tcontrolsBounds: {\n\t\t\tstart: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t},\n\t\t\tend: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t},\n\t\t}\n\t};\n\tconst controlsBounds = OPTS.controlsBounds;\n\n\tlet mouseMode = NONE;\n\t// let oldRange = [config.control.range[0], config.control.range[1]];\n\tlet oldRange = [0, 0];\n\tconst clickRangeBase = 14 * PIXEL_RATIO;\n\n\tlet xs = 0;\n\tlet xe = 0;\n\tlet ww = xe - xs;\n\n\tlet oldWidth = 0;\n\tlet oldX = 0;\n\n\tfunction mouseMove(mouse) {\n\t\tif (mouseMode === NONE) return;\n\t\tconfig.chart.shouldUpdate = true;\n\t\tconfig.control.shouldUpdate = true;\n\n\t\tconst norm = config.normalizeForControl(mouse.newX);\n\t\tconst normOld = config.normalizeForControl(mouse.x);\n\t\tconst diff = (norm - normOld);\n\n\t\tconst newRangeStart = oldRange[0] + diff;\n\t\tconst newRangeEnd = oldRange[1] + diff;\n\t\tif (mouseMode === DRAG_START) {\n\t\t\tif (newRangeStart > 0) {\n\t\t\t\tconfig.control.updateRange(newRangeStart, oldRange[1]);\n\t\t\t} else {\n\t\t\t\tconfig.control.updateRange(0, oldRange[1]);\n\t\t\t}\n\t\t} else if (mouseMode === DRAG_END) {\n\t\t\tif (newRangeEnd < 1) {\n\t\t\t\tconfig.control.updateRange(oldRange[0], newRangeEnd);\n\t\t\t} else {\n\t\t\t\tconfig.control.updateRange(oldRange[0], 1);\n\t\t\t}\n\t\t} else {\n\t\t\tif (newRangeStart >= 0 && newRangeEnd <= 1) {\n\t\t\t\tconfig.control.updateRange(newRangeStart, newRangeEnd);\n\t\t\t} else {\n\t\t\t\tif (newRangeEnd > 1) {\n\t\t\t\t\tlet diff = 1 - oldRange[1];\n\t\t\t\t\tconfig.control.updateRange(oldRange[0] + diff, oldRange[1] + diff);\n\t\t\t\t} else if (newRangeStart < 0) {\n\t\t\t\t\tlet diff = 0 - oldRange[0];\n\t\t\t\t\tconfig.control.updateRange(oldRange[0] + diff, oldRange[1] + diff);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction mouseDown(mouse) {\n\t\tconst clickRange = clickRangeBase;\n\t\tconst clickRangeStart = clickRangeBase;\n\t\tconst clickRangeEnd = clickRangeBase;\n\n\t\tconst boundsStart = controlsBounds.start;\n\t\tconst boundsEnd = controlsBounds.end;\n\t\tconst inControl = mouse.y > boundsStart.y && mouse.y < boundsStart.y + boundsStart.height;\n\t\tif (!inControl) return;\n\t\tconfig.chart.shouldUpdate = true;\n\t\tconfig.control.shouldUpdate = true;\n\t\t\n\t\toldRange = [config.control.range[0], config.control.range[1]];\n\t\tif (mouse.newX > boundsStart.x - clickRangeStart && mouse.newX < boundsStart.x + boundsStart.width && mouse.newY > boundsStart.y - clickRangeStart && mouse.newY < boundsStart.y + boundsStart.height + clickRangeStart) {\n\t\t\tmouseMode = DRAG_START;\n\t\t} else if (mouse.newX > boundsEnd.x && mouse.newX < boundsEnd.x + boundsEnd.width + clickRangeEnd && mouse.newY > boundsEnd.y - clickRangeEnd && mouse.newY < boundsEnd.y + boundsEnd.height + clickRangeEnd) {\n\t\t\tmouseMode = DRAG_END;\n\t\t} else if (mouse.newX > boundsStart.x + boundsStart.width && mouse.newX < boundsEnd.x && mouse.newY > boundsEnd.y - clickRangeBase && mouse.newY < boundsEnd.y + boundsEnd.height + clickRangeBase) {\n\t\t\tmouseMode = DRAG_ALL;\n\t\t}\n\t}\n\n\tfunction mouseUp(mouse) {\n\t\tmouseMode = NONE;\n\t}\n\n\n\tfunction init() {\n\t\tconfig.mouse.addListener('move', mouseMove);\n\t\tconfig.mouse.addListener('down', mouseDown);\n\t\tconfig.mouse.addListener('up', mouseUp);\n\t}\n\n\tfunction destroy() {\n\t\tconfig.mouse.removeListener('move', mouseMove);\n\t\tconfig.mouse.removeListener('down', mouseDown);\n\t\tconfig.mouse.removeListener('up', mouseUp);\n\t}\n\n\tfunction updateControlBounds(x, width) {\n\t\toldWidth = width;\n\t\toldX = x;\n\t}\n\n\tfunction renderControl(ctx, x, y, width, height) {\n\t\txs = x + width * config.control.range[0];\n\t\txe = x + width * config.control.range[1];\n\t\tww = xe - xs;\n\n\t\tcontrolsBounds.start.x = xs - controlWidth;\n\t\tcontrolsBounds.start.y = y;\n\t\tcontrolsBounds.start.width = controlWidth;\n\t\tcontrolsBounds.start.height = height;\n\n\t\tcontrolsBounds.end.x = xe;\n\t\tcontrolsBounds.end.y = y;\n\t\tcontrolsBounds.end.width = controlWidth;\n\t\tcontrolsBounds.end.height = height;\n\n\t\t// Fill unactive part\n\t\tctx.save();\n\t\tctx.globalAlpha = 0.6;\n\t\t// ctx.fillStyle = \"#E2EEF9\";\n\t\tctx.fillStyle = CURRENT.THEME.scrollBackground;\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(xs - 1, y);\n\t\tctx.lineTo(xs - 1, y + height);\n\t\tctx.arcTo(oldX, y + height, oldX, y + height - controlWidth, controlWidthDiv2);\n\t\tctx.arcTo(oldX, y, xs - 1, y, controlWidthDiv2);\n\t\tctx.closePath();\n\t\tctx.fill();\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(xe + 1, y);\n\t\tctx.lineTo(xe + 1, y + height);\n\t\tctx.arcTo(oldX + oldWidth, y + height, oldX + oldWidth, y + height - controlWidth, controlWidthDiv2);\n\t\tctx.arcTo(oldX + oldWidth, y, xe, y, controlWidthDiv2);\n\t\tctx.closePath();\n\t\tctx.fill();\n\n\t\tctx.restore();\n\t\t// End fill unactive part\n\n\n\t\t// Range body\n\t\tctx.save();\n\t\t// ctx.fillStyle = \"#C0D1E1\";\n\t\tctx.fillStyle = CURRENT.THEME.scrollSelector;\n\t\tctx.beginPath();\n\t\tctx.rect(xs, y, ww, ONE);\n\t\tctx.rect(xs, y + height - ONE, ww, ONE);\n\t\tctx.fill();\n\n\n\t\t// Start range\n\t\tctx.beginPath();\n\t\tconst xxxs = xs;\n\t\tctx.moveTo(xxxs, y);\n\t\tctx.lineTo(xxxs, y + height);\n\t\tctx.arcTo(xxxs - controlWidth, y + height, xxxs - controlWidth, y + height - controlWidth, controlWidthDiv13);\n\t\tctx.arcTo(xxxs - controlWidth, y, xxxs, y, controlWidthDiv13);\n\t\tctx.closePath();\n\t\tctx.fill();\n\n\t\t// End range\n\t\tctx.beginPath();\n\t\tctx.moveTo(xe, y);\n\t\tctx.lineTo(xe, y + height);\n\t\tctx.arcTo(xe + controlWidth, y + height, xe + controlWidth, y + height - controlWidth, controlWidthDiv13);\n\t\tctx.arcTo(xe + controlWidth, y, xe, y, controlWidthDiv13);\n\t\tctx.closePath();\n\t\tctx.fill();\n\n\t\tctx.restore();\n\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.fillStyle = \"#FFFFFF\";\n\t\tctx.rect(xs - controlPipaPos, y + height/2 - pipaH2, -controlPipaWidth, pipaH);\n\t\tctx.rect(xe + controlPipaPos, y + height/2 - pipaH2, controlPipaWidth, pipaH);\n\t\tctx.fill();\n\t\tctx.restore();\n\t}\n\n\n\tOPTS.updateControlBounds = updateControlBounds;\n\tOPTS.renderControl = renderControl;\n\tOPTS.destroy = destroy;\n\tOPTS.init = init;\n\n\tinit();\n\n\treturn OPTS;\n}","import { PIXEL_RATIO, ONE, CURRENT } from '../../Globals';\nimport BarLayerDrawer from '../Layers/Bar';\nimport { debugLayer } from '../utils';\nimport { createControlLayer, controlWidthMul2, controlWidth } from './utils';\n\n\nexport default function ControlsDrawer(drawersArgs) {\n\tconst { config } = drawersArgs;\n\tconst { ctx, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst  barLayers = yAxis.items.map(el => BarLayerDrawer(drawersArgs));\n\tconst { updateControlBounds, renderControl, destroy: destroyControl, init: initControl } = createControlLayer(config);\n\t\n\tfunction destroy() {\n\t\tdestroyControl();\n\t}\n\n\tfunction init() {\n\t\tinitControl();\n\t}\n\n\t\n\tconst stacked = new Array(xAxis.length);\n\tfunction drawControl(x, y, width, height) {\n\t\t// debugLayer(ctx, x, y, width, height);\n\t\t\n\t\tupdateControlBounds(x, width);\n\t\twidth = width - controlWidthMul2;\n\t\tx = x + controlWidth;\n\n\t\tstacked.fill(0);\n\t\tconst shouldRecalculate = barLayers[0].shouldBulkRecalculate(yAxis);\n\n\t\tfor (let i = 0; i < yAxis.items.length; i++) {\n\t\t\tif (shouldRecalculate) {\n\t\t\t\tbarLayers[i].calculate(yAxis.items[i], stacked, x, y + 3, width, height - 6);\n\t\t\t}\n\t\t\tbarLayers[i].draw(yAxis.items[i], x, y + 3, width, height - 6);\n\t\t}\n\n\t\trenderControl(ctx, x, y, width, height);\n\t}\n\n\tdrawControl.destroy = destroy;\n\tdrawControl.init = init;\n\n\treturn drawControl;\n}","import { PIXEL_RATIO, CURRENT, DOT_RADIUS, PI2 } from '../../Globals';\n\n\nexport default function Line({ config, normYKey }, opts = {}) {\n\tconst { ctx, control, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst lineWidth = (opts.lineWidth || 2) * PIXEL_RATIO;\n\tconst chunkScale = config.scaleX;\n\n\tconst draws = {\n\t\titems: [],\n\t\topacity: 1.0,\n\n\t\toffsetIndex: 0,\n\t};\n\n\tlet prevWidth = 0;\n\n\tfunction shouldBulkRecalculate(datas) {\n\t\treturn true;\n\t}\n\n\tfunction shouldRecalculate(data) {\n\t\tconst result = (\n\t\t\tdata.opacity.inProgress\n\t\t\t|| !data.calculated\n\t\t\t|| ctx.canvas.width !== prevWidth\n\t\t);\n\t\tprevWidth = ctx.canvas.width;\n\t\treturn result;\n\t}\n\n\tfunction calculate(data, x, y, width, height) {\n\t\tconst { key, items, opacity } = data;\n\t\tconst normY = data.scaling[normYKey];\n\t\tconst currOpacity = opacity.value;\n\t\tdraws.opacity = opacity.value;\n\n\t\tif (!currOpacity) return;\n\t\tif (currOpacity < 1) {\n\t\t\tconfig.control.shouldUpdate = true;\n\t\t}\n\n\t\tdraws.items = [];\n\t\tdraws.offsetIndex = 0;\n\n\t\tconst count = items.length;\n\t\tconst chunkSize = chunkScale * width;\n\t\tconst yh = y + height;\n\n\t\tconst startBreakpoint = -chunkSize;\n\t\tconst endBreakpoint = ctx.canvas.width + chunkSize;\n\n\t\tdraws.items.push([x + 0, yh - normY(items[0]) * height]);\n\n\t\tfor (let i = 1; i < count; i++) {\n\t\t\tconst X = x + chunkSize * i;\n\t\t\tconst Y = yh - normY(items[i]) * height;\n\t\t\tif (Y > yh) {\n\t\t\t\tconfig.control.shouldUpdate = true;\n\t\t\t}\n\t\t\tif (X < startBreakpoint) {\n\t\t\t\tdraws.offsetIndex++;\n\t\t\t\tcontinue;\n\t\t\t} else if (X > endBreakpoint) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdraws.items.push([X, Y]);\n\t\t}\n\n\t\tdata.calculated = true;\n\t}\n\n\tfunction drawLine(data, x, y, width, height) {\n\t\tconst { items, opacity } = draws;\n\t\tconst { key } = data;\n\n\t\tif (!opacity) return;\n\t\tconst count = items.length;\n\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.moveTo(items[0][0], items[0][1]);\n\t\tfor (let i = 1; i < count; i++) {\n\t\t\tctx.lineTo(items[i][0], items[i][1]);\n\t\t}\n\t\tctx.lineWidth = lineWidth;\n\t\tctx.strokeStyle = colors[key];\n\t\tctx.globalAlpha = opacity;\n\t\tctx.lineJoin = 'round';\n\t\tctx.stroke();\n\t\tctx.restore();\n\t}\n\n\treturn {\n\t\tdraws: draws,\n\t\tshouldBulkRecalculate: shouldBulkRecalculate,\n\t\tshouldRecalculate: shouldRecalculate,\n\t\tcalculate: calculate,\n\t\tdraw: drawLine,\n\t}\n}","import { throttle } from '../../utils';\nimport { PI2, TWO, CURRENT, DOT_RADIUS } from '../../Globals';\n\nimport { createMouseDotHandling } from './utils';\n\n\nexport default function LineDots({ config, normYKey }) {\n\tconst { ctx, control, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst h = createMouseDotHandling(\n\t\tconfig,\n\t\t{\n\t\t\tpaddingLeftSelector: (context) => DOT_RADIUS,\n\t\t\tpaddingRightSelector: (context) => DOT_RADIUS,\n\t\t\trounding: Math.round,\n\t\t\tplus: 1,\n\t\t}\n\t);\n\n\tfunction destroy() {\n\t\th.destroy();\n\t}\n\n\tfunction init() {\n\t\th.init();\n\t}\n\n\tfunction drawLineDots(items, x, y, width, height) {\n\t\th.current.width = width;\n\t\th.current.height = height;\n\t\th.current.x = x;\n\t\th.current.y = y;\n\n\t\th.count = items.length;\n\t\th.chunkSize = h.chunkScale * width;\n\t\t// chunkSizeDiv2 = chunkSize / 2;\n\n\t\treturn h.current.index;\n\t}\n\n\tdrawLineDots.destroy = destroy;\n\tdrawLineDots.init = init;\n\n\treturn drawLineDots;\n}","import {\n\tPIXEL_RATIO,\n\tBOTTOM_PADDING,\n\tX_AXIS_HEIGHT,\n\tCURRENT,\n\tPI2,\n\tONE,\n\tTWO,\n\tDOT_RADIUS,\n\tDOT_RADIUS_DIV_2,\n\tDOT_RADIUS_MUL_2,\n} from '../../Globals';\n\nexport function drawDotsForLines({ config }, y, height, activeIndex, drawLineLayers) {\n\tconst { ctx, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tfor (let i = 0; i < yAxis.items.length; i++ ) {\n\t\tconst { key } = yAxis.items[i];\n\t\tconst { draws } = drawLineLayers[i];\n\t\tconst itemsIndex = activeIndex - draws.offsetIndex;\n\t\tif (draws.items[itemsIndex]) {\n\t\t\tconst [ X, Y ] = draws.items[itemsIndex];\n\t\t\tctx.save();\n\t\t\tctx.strokeStyle = CURRENT.THEME.gridLines;\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.globalAlpha = 0.1;\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(X, y);\n\t\t\tctx.lineTo(X, y + height);\n\t\t\tctx.stroke();\n\t\t\tctx.restore();\n\n\t\t\tctx.save();\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(X, Y, DOT_RADIUS, 0, PI2);\n\t\t\tctx.fillStyle = CURRENT.THEME.background;\n\t\t\tctx.lineWidth = TWO;\n\t\t\tctx.globalAlpha = draws.opacity;\n\t\t\tctx.strokeStyle = colors[key];\n\t\t\tctx.fill();\n\t\t\tctx.stroke();\n\t\t\tctx.restore();\n\t\t}\n\t}\n}","import {\n\tPIXEL_RATIO,\n\tBOTTOM_PADDING,\n\tX_AXIS_HEIGHT,\n\tCURRENT,\n\tPI2,\n\tONE,\n\tTWO,\n\tDOT_RADIUS,\n\tDOT_RADIUS_DIV_2,\n\tDOT_RADIUS_MUL_2,\n} from '../../Globals';\n\nimport LineLayerDrawer from '../Layers/Line';\nimport LineActivePopup from '../Layers/LineActivePopup';\nimport YAxisLayerDrawer from '../Layers/YAxis';\nimport XAxisLayerDrawer from '../Layers/XAxis';\nimport { drawDotsForLines } from './utils';\n\nimport { debugLayer } from '../utils';\n\n\nexport default function DualLineChartDrawer(drawersArgs) {\n\tconst { config } = drawersArgs;\n\tconst { ctx, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\n\tconst drawLeftYAxisLayer = YAxisLayerDrawer(drawersArgs, {\n\t\ttextAlign: 'left',\n\t});\n\n\tconst drawRightYAxisLayer = YAxisLayerDrawer(drawersArgs, {\n\t\ttextAlign: 'right',\n\t});\n\n\tconst drawXAxisLayer = XAxisLayerDrawer(drawersArgs);\n\t// const drawLineLayer  = LineLayerDrawer(drawersArgs);\n\tconst drawLineLayers = yAxis.items.map(el => LineLayerDrawer(drawersArgs));\n\tconst calculateLineActivePopupIndex  = LineActivePopup(drawersArgs);\n\n\tfunction destroy() {\n\t\tcalculateLineActivePopupIndex.destroy();\n\t}\n\n\tfunction init() {\n\t\tcalculateLineActivePopupIndex.init();\n\t}\n\n\tfunction drawChart(x, y, width, height) {\n\t\t// debugLayer(ctx, x, y, width, height);\n\n\t\tconst XS = width * config.control.range[0];\n\t\tconst xRanged = x - XS / config.control.scale;\n\t\tconst widthRanged = width / config.control.scale;\n\n\t\tconst HEIGHT = height - BOTTOM_PADDING - DOT_RADIUS_MUL_2;\n\t\tconst Y = y + DOT_RADIUS + TWO;\n\n\t\t// Draw layers\n\t\tdrawXAxisLayer(xAxis, xRanged, y + HEIGHT - X_AXIS_HEIGHT, widthRanged, X_AXIS_HEIGHT);\n\n\t\tlet drawYLine = true;\n\t\tif (yAxis.items[0].enabled) {\n\t\t\tdrawLeftYAxisLayer(yAxis.items[0], x, Y, width, HEIGHT - X_AXIS_HEIGHT, drawYLine);\n\t\t\tdrawYLine = false;\n\t\t}\n\t\tif (yAxis.items[1].enabled) {\n\t\t\tdrawRightYAxisLayer(yAxis.items[1], x + width, Y, -width, HEIGHT - X_AXIS_HEIGHT, drawYLine);\n\t\t\tdrawYLine = false;\n\t\t}\n\n\t\tconst activeIndex = calculateLineActivePopupIndex(xAxis, xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT);\n\t\tfor (let i = 0; i < yAxis.items.length; i++ ) {\n\t\t\tdrawLineLayers[i].calculate(yAxis.items[i], xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT);\n\t\t\tdrawLineLayers[i].draw(yAxis.items[i], xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT, activeIndex);\n\t\t}\n\n\t\tdrawDotsForLines(drawersArgs, y, height, activeIndex, drawLineLayers);\n\t}\n\n\tdrawChart.destroy = destroy;\n\tdrawChart.init = init;\n\n\treturn drawChart;\n}","import {\n\tPIXEL_RATIO,\n\tBOTTOM_PADDING,\n\tX_AXIS_HEIGHT,\n\tCURRENT,\n\tPI2,\n\tONE,\n\tTWO,\n\tDOT_RADIUS,\n\tDOT_RADIUS_DIV_2,\n\tDOT_RADIUS_MUL_2,\n} from '../../Globals';\n\nimport LineLayerDrawer from '../Layers/Line';\nimport LineActivePopupLayer from '../Layers/LineActivePopup';\nimport YAxisLayerDrawer from '../Layers/YAxis';\nimport XAxisLayerDrawer from '../Layers/XAxis';\nimport { drawDotsForLines } from './utils';\n\nimport { debugLayer } from '../utils';\n\n\nexport default function LineChartDrawer(drawersArgs) {\n\tconst { config } = drawersArgs;\n\tconst { ctx, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst chartPadding = 6 * PIXEL_RATIO;\n\tconst chartPadding2 = chartPadding * 2;\n\n\t// const drawLineLayer = LineLayerDrawer(drawersArgs);\n\tconst drawLineLayers = yAxis.items.map(el => LineLayerDrawer(drawersArgs));\n\tconst calculateLineActivePopupIndex = LineActivePopupLayer(drawersArgs);\n\tconst drawXAxisLayer = XAxisLayerDrawer(drawersArgs);\n\tconst drawYAxisLayer = YAxisLayerDrawer(drawersArgs, {\n\t\ttextAlign: 'left',\n\t});\n\n\tfunction destroy() {\n\t\tcalculateLineActivePopupIndex.destroy();\n\t}\n\n\tfunction init() {\n\t\tcalculateLineActivePopupIndex.init();\n\t}\n\n\tfunction drawChart(x, y, width, height) {\n\t\t// debugLayer(ctx, x, y, width, height);\n\n\t\tconst XS = width * config.control.range[0];\n\t\tconst xRanged = x - XS / config.control.scale;\n\t\tconst widthRanged = width / config.control.scale;\n\n\t\tconst HEIGHT = height - BOTTOM_PADDING - DOT_RADIUS_MUL_2;\n\t\tconst Y = y + DOT_RADIUS + TWO;\n\n\t\t// Draw layers\n\t\tdrawXAxisLayer(xAxis, xRanged, y + HEIGHT - X_AXIS_HEIGHT, widthRanged, X_AXIS_HEIGHT);\n\t\tdrawYAxisLayer(yAxis.items[0], x, Y, width, HEIGHT - X_AXIS_HEIGHT, true);\n\t\tfor (let i = 0; i < yAxis.items.length; i++ ) {\n\t\t\tdrawLineLayers[i].calculate(yAxis.items[i], xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT);\n\t\t\tdrawLineLayers[i].draw(yAxis.items[i], xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT);\n\t\t}\n\n\t\tconst activeIndex = calculateLineActivePopupIndex(xAxis, xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT);\n\t\tdrawDotsForLines(drawersArgs, y, height, activeIndex, drawLineLayers);\n\t}\n\n\tdrawChart.destroy = destroy;\n\tdrawChart.init = init;\n\n\treturn drawChart;\n}","import { PIXEL_RATIO, ONE, CURRENT } from '../../Globals';\nimport LineLayerDrawer from '../Layers/Line';\nimport { debugLayer } from '../utils';\nimport { createControlLayer, controlWidthMul2, controlWidth } from './utils';\n\n\nexport default function ControlsDrawer(drawersArgs) {\n\tconst { config } = drawersArgs;\n\tconst { ctx, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst lineLayers = yAxis.items.map(el => LineLayerDrawer(drawersArgs, { lineWidth: 1 }));\n\tconst { updateControlBounds, renderControl, destroy: destroyControl, init: initControl } = createControlLayer(config);\n\t\n\tfunction destroy() {\n\t\tdestroyControl();\n\t}\n\n\tfunction init() {\n\t\tinitControl();\n\t}\n\n\n\tfunction drawControl(x, y, width, height) {\n\t\t// debugLayer(ctx, x, y, width, height);\n\n\t\tupdateControlBounds(x, width);\n\t\twidth = width - controlWidthMul2;\n\t\tx = x + controlWidth;\n\n\t\tfor (let i = 0; i < yAxis.items.length; i++ ) {\n\t\t\tif (lineLayers[i].shouldRecalculate(yAxis.items[i])) {\n\t\t\t\tlineLayers[i].calculate(yAxis.items[i], x, y + 3, width, height - 6);\n\t\t\t}\n\t\t\tlineLayers[i].draw(yAxis.items[i], x, y + 3, width, height - 6);\n\t\t}\n\n\t\trenderControl(ctx, x, y, width, height);\n\t}\n\n\tdrawControl.destroy = destroy;\n\tdrawControl.init = init;\n\n\treturn drawControl;\n}","import { PIXEL_RATIO, PI1, FONT } from '../../Globals';\n\n\nexport default function Area({ config, normYKey }, opts = {}) {\n\tconst { ctx, control, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst lineWidth = 2 * PIXEL_RATIO;\n\tconst mouse = config.mouse.mouse;\n\tconst popup = config.popup;\n\tconst chunkScale = config.scaleX;\n\n\tlet currentWidth = 0;\n\tlet currentHeight = 0;\n\tlet currentX = 0;\n\tlet currentY = 0;\n\tlet RADIUS = 0;\n\tlet centerX = 0;\n\tlet centerY = 0;\n\n\t// config.mouse.addListener('down', function down(mouse, e) {\n\t// \tif (e.target !== ctx.canvas) return;\n\t// \tconsole.log('G+HEY', Math.round(mouse.newX), Math.round(mouse.newY));\n\t// \tconfig.chart.shouldUpdate = true;\n\t// });\n\n\tfunction calculate(data, perc, start, end, x, y, width, height) {\n\t\t\n\t}\n\n\tfunction drawArea(data, perc, start, end, x, y, width, height) {\n\t\tconst { key, items, opacity } = data;\n\t\tconst copacity = opacity.value;\n\n\t\tcurrentWidth = width;\n\t\tcurrentHeight = height;\n\t\tcurrentX = x;\n\t\tcurrentY = y;\n\n\t\tif (!copacity) return;\n\t\tif (copacity < 1) {\n\t\t\tconfig.control.shouldUpdate = true;\n\t\t}\n\n\t\tRADIUS = Math.min(width / 2, height / 2);\n\t\tcenterX = x + width / 2;\n\t\tcenterY = y + height / 2;\n\n\t\t// const ang = Math.atan2(mouse.newX - centerX, mouse.newY - centerY) * 2\n\t\t// console.log(ang);\n\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.fillStyle = 'red';\n\t\tctx.moveTo(centerX, centerY);\n\t\tconst angleStart = PI1 * start * 2;\n\t\tconst angleEnd = PI1 * end * 2;\n\t\tctx.arc(centerX, centerY, RADIUS, angleStart, angleEnd);\n\t\tctx.moveTo(centerX, centerY);\n\t\tctx.fillStyle = colors[key];\n\t\tctx.fill();\n\t\tctx.restore();\n\n\t\tctx.save();\n\t\tctx.fillStyle = '#fff';\n\t\tctx.textAlign = 'center';\n\t\tctx.globalAlpha = copacity;\n\t\tctx.textBaseline = 'middle';\n\t\tctx.font = FONT;\n\t\tconst textAngle = angleStart + (angleEnd - angleStart) / 2;\n\t\tconst textX = centerX + Math.cos(textAngle) * (RADIUS / 2);\n\t\tconst textY = centerY + Math.sin(textAngle) * (RADIUS / 2);\n\n\t\t// const startX = centerX + Math.cos(angleStart) * RADIUS;\n\t\t// const startY = centerY + Math.sin(angleStart) * RADIUS;\n\t\t// const endX = centerX + Math.cos(angleEnd) * RADIUS;\n\t\t// const endY = centerY + Math.sin(angleEnd) * RADIUS;\n\t\t// const mouseDistX = Math.abs(centerX - mouse.newX);\n\t\t// const mouseDistY = Math.abs(centerY - mouse.newY);\n\t\t// const mouseDist = Math.sqrt(mouseDistX * mouseDistX + mouseDistY * mouseDistY);\n\t\t// console.log(RADIUS, mouseDist);\n\t\t// ctx.fillRect(startX, startY, 10, 10);\n\t\t// ctx.fillRect(endX, endY, 10, 10);\n\t\t\n\t\t// mouse.newX\n\t\t// mouse.newY\n\t\tctx.fillText(perc.toFixed(0) + '%', textX, textY);\n\t\tctx.restore();\n\t}\n\n\treturn {\n\t\tcalculate: calculate,\n\t\tdraw: drawArea,\n\t}\n}","import {\n\tPIXEL_RATIO,\n\tBOTTOM_PADDING,\n\tX_AXIS_HEIGHT,\n\tONE,\n\tTWO,\n\tDOT_RADIUS,\n\tDOT_RADIUS_DIV_2,\n\tDOT_RADIUS_MUL_2,\n} from '../../Globals';\n\nimport { average } from '../../utils';\nimport AreaLayerDrawer from '../Layers/Area';\nimport { debugLayer } from '../utils';\n\n\n\nexport default function AreaChartDrawer(drawersArgs) {\n\tconst { config } = drawersArgs;\n\tconst { ctx, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst chartPadding = 6 * PIXEL_RATIO;\n\tconst chartPadding2 = chartPadding * 2;\n\n\tconst drawAreaLayers = yAxis.items.map(el => AreaLayerDrawer(drawersArgs));\n\n\tfunction destroy() {\n\t\t\n\t}\n\n\tfunction init() {\n\t\t\n\t}\n\n\tfunction drawChart(x, y, width, height) {\n\t\t// debugLayer(ctx, x, y, width, height);\n\n\t\tconst XS = width * config.control.range[0];\n\t\tconst HEIGHT = height - BOTTOM_PADDING - DOT_RADIUS_MUL_2;\n\t\tconst Y = y + DOT_RADIUS + TWO;\n\n\t\tconst itemsStart = Math.floor(xAxis.length * config.control.range[0]);\n\t\tconst itemsDiff = Math.ceil(xAxis.length * (config.control.range[1] - config.control.range[0]));\n\t\tconst itemsEnd = itemsStart + itemsDiff;\n\t\tconst percentage = yAxis.items.reduce((curr, item) => {\n\t\t\treturn curr + item.items.slice(itemsStart, itemsEnd).reduce(average, 0) * item.opacity.value;\n\t\t}, 0) / 100;\n\t\tlet stacked = 0;\n\n\t\tfor (let i = 0; i < yAxis.items.length; i++) {\n\t\t\tconst perc = yAxis.items[i].items.slice(itemsStart, itemsEnd).reduce(average, 0) / percentage * yAxis.items[i].opacity.value;\n\t\t\t// drawAreaLayers[i].calculate(yAxis.items[i], perc, stacked, stacked += perc, x, Y, width, HEIGHT - X_AXIS_HEIGHT);\n\t\t\tdrawAreaLayers[i].draw(yAxis.items[i], perc, stacked, stacked += perc, x, Y, width, HEIGHT - X_AXIS_HEIGHT);\n\t\t}\n\t}\n\n\tdrawChart.destroy = destroy;\n\tdrawChart.init = init;\n\n\treturn drawChart;\n}","import { PIXEL_RATIO } from '../../Globals';\n\n\nexport default function AreaLine({ config, normYKey }, opts = {}) {\n\tconst { ctx, control, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst chunkScale = config.scaleX;\n\n\tfunction calculate(data, stacked, percentage, x, y, width, height) {\n\t\t\n\t}\n\n\tfunction drawAreaLine(data, stacked, percentage, x, y, width, height) {\n\t\tconst { key, items, opacity } = data;\n\t\tconst normY = data.scaling[normYKey];\n\t\tconst normYM = normY(1);\n\t\tconst copacity = opacity.value;\n\n\t\tif (!copacity) return;\n\t\tif (copacity < 1) {\n\t\t\tconfig.control.shouldUpdate = true;\n\t\t}\n\t\tconst count = items.length;\n\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tconst chunkSize = chunkScale * width;\n\t\tconst XS = new Array(count).fill(0);\n\n\t\tconst onePercent = percentage[0];\n\t\tconst perc = Math.round(stacked[0] / onePercent);\n\t\tconst Y = y + height - normYM * perc * height;\n\t\tctx.moveTo(x, Y);\n\t\tXS[0] = x + chunkSize * 0;\n\n\t\tfor (let i = 1; i < count; i++) {\n\t\t\tconst perc = Math.round(stacked[i] / percentage[i]);\n\t\t\tXS[i] = x + chunkSize * i;\n\t\t\tconst Y = y + height - normYM * perc * height;\n\t\t\tctx.lineTo(XS[i], Y);\n\t\t}\n\n\t\tfor (let i = count - 1; i >= 0; i--) {\n\t\t\tstacked[i] += items[i] * copacity;\n\t\t\tconst perc = Math.round(stacked[i] / percentage[i]);\n\t\t\tconst Y = y + height - normYM * perc * height;\n\t\t\tctx.lineTo(XS[i], Y);\n\t\t}\n\t\tctx.closePath();\n\n\t\tctx.fillStyle = colors[key];\n\t\tctx.fill();\n\t\tctx.restore();\n\t}\n\n\treturn {\n\t\tcalculate: calculate,\n\t\tdraw: drawAreaLine,\n\t}\n}","import { throttle } from '../../utils';\nimport { CURRENT, DOT_RADIUS } from '../../Globals';\n\nimport { createMouseDotHandling } from './utils';\n\n\nexport default function AreaLineActivePopup({ config, normYKey }) {\n\tconst { ctx, control, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst h = createMouseDotHandling(\n\t\tconfig,\n\t\t{\n\t\t\tpaddingLeftSelector: (context) => DOT_RADIUS,\n\t\t\tpaddingRightSelector: (context) => DOT_RADIUS,\n\t\t\trounding: Math.round,\n\t\t\tplus: 1,\n\t\t}\n\t);\n\n\tfunction destroy() {\n\t\th.destroy();\n\t}\n\n\tfunction init() {\n\t\th.init();\n\t}\n\n\tfunction drawAreaLineActivePopup(data, x, y, width, height) {\n\t\th.current.width = width;\n\t\th.current.height = height;\n\t\th.current.x = x;\n\t\th.current.y = y;\n\n\t\th.count = data.length;\n\t\th.chunkSize = h.chunkScale * width;\n\n\t\tif (h.current.index > -1 && h.current.index < h.count) {\n\t\t\tconst X = x + h.chunkSize * h.current.index;\n\t\t\tctx.save();\n\t\t\tctx.strokeStyle = CURRENT.THEME.gridLines;\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.globalAlpha = 0.2;\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(X, y);\n\t\t\tctx.lineTo(X, y + height);\n\t\t\tctx.stroke();\n\t\t\tctx.restore();\n\t\t}\n\t}\n\n\tdrawAreaLineActivePopup.destroy = destroy;\n\tdrawAreaLineActivePopup.init = init;\n\n\treturn drawAreaLineActivePopup;\n}","import {\n\tPIXEL_RATIO,\n\tBOTTOM_PADDING,\n\tX_AXIS_HEIGHT,\n\tONE,\n\tTWO,\n\tDOT_RADIUS,\n\tDOT_RADIUS_DIV_2,\n\tDOT_RADIUS_MUL_2,\n} from '../../Globals';\n\nimport AreaLineLayerDrawer from '../Layers/AreaLine';\nimport AreaLineActiveLayerDrawer from '../Layers/AreaLineActivePopup';\nimport YAxisLayerDrawer from '../Layers/YAxis';\nimport XAxisLayerDrawer from '../Layers/XAxis';\n\nimport { debugLayer } from '../utils';\n\n\nexport default function AreaChartDrawer(drawersArgs) {\n\tconst { config } = drawersArgs;\n\tconst { ctx, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst chartPadding = 6 * PIXEL_RATIO;\n\tconst chartPadding2 = chartPadding * 2;\n\n\tconst drawXAxisLayer = XAxisLayerDrawer(drawersArgs);\n\tconst drawAreaLineLayers = yAxis.items.map(el => AreaLineLayerDrawer(drawersArgs));\n\tconst drawAreaLineActiveLayer = AreaLineActiveLayerDrawer(drawersArgs);\n\tconst drawYAxisLayer = YAxisLayerDrawer(drawersArgs, {\n\t\ttextAlign: 'left',\n\t});\n\n\tfunction destroy() {\n\t\tdrawAreaLineActiveLayer.destroy();\n\t}\n\n\tfunction init() {\n\t\tdrawAreaLineActiveLayer.init();\n\t}\n\n\tfunction drawChart(x, y, width, height) {\n\t\t// debugLayer(ctx, x, y, width, height);\n\n\t\tconst XS = width * config.control.range[0];\n\t\tconst xRanged = x - XS / config.control.scale;\n\t\tconst widthRanged = width / config.control.scale;\n\n\t\tconst HEIGHT = height - BOTTOM_PADDING - DOT_RADIUS_MUL_2;\n\t\tconst Y = y + DOT_RADIUS + TWO;\n\n\t\t// Draw layers\n\t\tconst percentage = new Array(xAxis.length).fill(0);\n\t\tfor (let i = 0; i < yAxis.items.length; i++) {\n\t\t\tfor (let j = 0; j < yAxis.items[i].items.length; j++) {\n\t\t\t\tpercentage[j] += yAxis.items[i].items[j] * yAxis.items[i].opacity.value;\n\t\t\t}\n\t\t}\n\t\tfor (let i = 0; i < xAxis.length; i++) {\n\t\t\tpercentage[i] /= 100;\n\t\t}\n\n\t\tconst stacked = new Array(xAxis.length).fill(0);\n\t\tfor (let i = 0; i < yAxis.items.length; i++) {\n\t\t\t// drawAreaLineLayers[i].calculate(yAxis.items[i], stacked, percentage, xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT);\n\t\t\tdrawAreaLineLayers[i].draw(yAxis.items[i], stacked, percentage, xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT);\n\t\t}\n\t\t\n\t\t// console.log(xAxis)\n\t\tdrawAreaLineActiveLayer(xAxis, xRanged, Y, widthRanged, HEIGHT - X_AXIS_HEIGHT);\n\t\t\n\t\tdrawXAxisLayer(xAxis, xRanged, y + HEIGHT - X_AXIS_HEIGHT, widthRanged, X_AXIS_HEIGHT);\n\t\tdrawYAxisLayer(yAxis.items[0], x, Y, width, HEIGHT - X_AXIS_HEIGHT, true);\n\t}\n\n\tdrawChart.destroy = destroy;\n\tdrawChart.init = init;\n\n\treturn drawChart;\n}","import { PIXEL_RATIO, ONE, CURRENT } from '../../Globals';\nimport AreaLineLayerDrawer from '../Layers/AreaLine';\nimport { debugLayer } from '../utils';\nimport { createControlLayer, controlWidthMul2, controlWidth } from './utils';\n\n\nexport default function AreaLineControlsDrawer(drawersArgs) {\n\tconst { config } = drawersArgs;\n\tconst { ctx, data } = config;\n\tconst { colors, yAxis, xAxis } = data;\n\tconst drawAreaLineLayers = yAxis.items.map(el => AreaLineLayerDrawer(drawersArgs));\n\tconst { updateControlBounds, renderControl, destroy: destroyControl, init: initControl } = createControlLayer(config);\n\t\n\tfunction destroy() {\n\t\tdestroyControl();\n\t}\n\n\tfunction init() {\n\t\tinitControl();\n\t}\n\n\tfunction drawControl(x, y, width, height) {\n\t\t// debugLayer(ctx, x, y, width, height);\n\t\t\n\t\tupdateControlBounds(x, width);\n\t\twidth = width - controlWidthMul2;\n\t\tx = x + controlWidth;\n\n\t\tconst percentage = new Array(xAxis.length).fill(0);\n\t\tfor (let i = 0; i < yAxis.items.length; i++) {\n\t\t\tfor (let j = 0; j < yAxis.items[i].items.length; j++) {\n\t\t\t\tpercentage[j] += yAxis.items[i].items[j] * yAxis.items[i].opacity.value;\n\t\t\t}\n\t\t}\n\t\tfor (let i = 0; i < xAxis.length; i++) {\n\t\t\tpercentage[i] /= 100;\n\t\t}\n\n\t\tconst stacked = new Array(xAxis.length).fill(0);\n\t\tfor (let i = 0; i < yAxis.items.length; i++) {\n\t\t\t// drawAreaLineLayers.calculate(yAxis.items[i], stacked, percentage, x, y + 3, width, height - 6);\n\t\t\tdrawAreaLineLayers[i].draw(yAxis.items[i], stacked, percentage, x, y + 3, width, height - 6);\n\t\t}\n\n\t\trenderControl(ctx, x, y, width, height);\n\t}\n\n\tdrawControl.destroy = destroy;\n\tdrawControl.init = init;\n\n\treturn drawControl;\n}","import BarChartDrawer from './Drawers/Charts/BarChart';\nimport BarControlsDrawer from './Drawers/Controls/BarControls';\n\nimport DualLineChartDrawer from './Drawers/Charts/DualLineChart';\nimport LineChartDrawer from './Drawers/Charts/LineChart';\nimport LineControlsDrawer from './Drawers/Controls/LineControls';\n\nimport AreaChartDrawer from './Drawers/Charts/AreaChart';\nimport AreaLineChartDrawer from './Drawers/Charts/AreaLineChart';\nimport AreaLineControlsDrawer from './Drawers/Controls/AreaLineControls';\n\n\nconst DualLine = {\n\tdrawChartFabric: (args) => DualLineChartDrawer(args),\n\tdrawControlFabric: (args) => LineControlsDrawer(args),\n};\n\nconst Bar = {\n\tdrawChartFabric: (args) => BarChartDrawer(args),\n\tdrawControlFabric: (args) => BarControlsDrawer(args),\n};\n\nconst Area = {\t\n\tdrawChartFabric: (args) => AreaLineChartDrawer(args),\n\tdrawControlFabric: (args) => AreaLineControlsDrawer(args),\n};\n\nconst AreaCircle = {\t\n\tdrawChartFabric: (args) => AreaChartDrawer(args),\n\tdrawControlFabric: (args) => AreaLineControlsDrawer(args),\n};\n\nconst Line = {\n\tdrawChartFabric: (args) => LineChartDrawer(args),\n\tdrawControlFabric: (args) => LineControlsDrawer(args),\n};\n\n\nconst ChartTypes = {\n\tbar: Bar,\n\tarea: Area,\n\tline: Line,\n\tdual_line: DualLine,\n};\n\nexport function fabricByDatasource(datasource, isZoom) {\n\tconst types = Object.keys(datasource.types).map(key => datasource.types[key]).filter(el => el !== 'x');\n\tif (!types.length) {\n\t\t// throw new Error(\"DataSet error. No columns for chart\")\n\t\tconsole.warn(\"DataSet error. No columns for chart\")\n\t} else if (types.length > 50) {\n\t\t// throw new Error(\"DataSet error. Supported up to 50 columns on one graph.\")\n\t\tconsole.warn(\"DataSet warning. Supported up to 50 columns on one graph.\")\n\t}\n\n\tconst type = types[0];\n\tif (ChartTypes[type]) {\n\t\tif (datasource.y_scaled) {\n\t\t\tif (type === 'line' || types.length === 2) {\n\t\t\t\treturn ChartTypes['dual_line'];\n\t\t\t} else {\n\t\t\t\t// throw new Error(\"DataSet error. 'y_scaled' is only used with exactly 2 'line' columns.\")\n\t\t\t\tconsole.warn(\"DataSet warning. 'y_scaled' is only used with exactly 2 'line' columns.\");\n\t\t\t}\n\t\t}\n\t\tif (isZoom) {\n\t\t\tif (type === 'area') {\n\t\t\t\treturn AreaCircle;\n\t\t\t}\n\t\t}\n\t\treturn ChartTypes[type]\n\t}\n\n\treturn fabric;\n}\n\nexport default ChartTypes;","// import Mouse from './Utils/Mouse';\nimport { createMouseForChart } from './Utils/Mouse';\nimport { createAnimator, animateObject } from './Utils/Animated';\nimport { prepareDataset, dateString } from './Utils/YAxis';\n\nimport { createElement } from './UI/utils';\nimport { createPopup } from './UI/Popup';\nimport { createHeader } from './UI/Header';\nimport { createButtons } from './UI/Buttons';\n\nimport { fabricByDatasource } from './ChartTypes';\n\n\nimport {\n\tCONTROL_HEIGHT,\n\tCANVAS_HEIGHT,\n\tSIDES_PADDING,\n\tSIDES_PADDING2,\n\tPIXEL_RATIO,\n} from './Globals';\n\nimport {\n\tnormalizeMemo,\n\tnormalize,\n\tthrottleLForceable,\n} from './utils';\n\n\nfunction createControl(config, drawControlFabric, drawersArgs, onRangeUpdate, opts = {}) {\n\tconst drawControl = drawControlFabric(drawersArgs);\n\tconst control = {\n\t\trange: opts.range || [0.7, 1.0],\n\t\tcount: 0,\n\t\tscale: 0,\n\t\tshouldUpdate: true,\n\n\t\tanimateRange(oldRange, newRange) {\n\t\t\tanimateObject(config.animator, control.range, 0, oldRange[0], newRange[0], (val) => control.updateRange(control.range[0], control.range[1]));\n\t\t\tanimateObject(config.animator, control.range, 1, oldRange[1], newRange[1], (val) => control.updateRange(control.range[0], control.range[1]));\n\t\t},\n\n\t\tdestroy: function destroy() {\n\t\t\tdrawControl.destroy();\n\t\t},\n\n\t\tinit: function init() {\n\t\t\tdrawControl.init();\n\t\t},\n\n\t\tupdateRange: function updateRange(start, end) {\n\t\t\tconst scale = end - start;\n\t\t\tconst count = config.data.xAxis.length * scale;\n\t\t\tif (count > 5) {\n\t\t\t\t// control.count = Math.ceil(count);\n\t\t\t\tcontrol.count = (count >> 0) + 1;\n\t\t\t\tcontrol.scale = scale;\n\t\t\t\tcontrol.range[0] = start;\n\t\t\t\tcontrol.range[1] = end;\n\t\t\t\tonRangeUpdate && onRangeUpdate();\n\t\t\t}\n\t\t},\n\n\t\trender: function render() {\n\t\t\t// console.log('update control', index);\n\t\t\tcontrol.shouldUpdate = false;\n\t\t\tconfig.ctx.clearRect(0, CANVAS_HEIGHT - CONTROL_HEIGHT, config.canvasBounds.width, CONTROL_HEIGHT);\n\t\t\tdrawControl(SIDES_PADDING, CANVAS_HEIGHT - CONTROL_HEIGHT, config.canvasBounds.width - SIDES_PADDING2, CONTROL_HEIGHT);\n\t\t}\n\t};\n\n\t// if (opts.fromRange && opts.range) {\n\t// \tanimateObject(config.animator, control.range, 0, opts.fromRange[0], opts.range[0]);\n\t// \tanimateObject(config.animator, control.range, 1, opts.fromRange[1], opts.range[1]);\n\t// }\n\n\treturn control;\n}\n\nfunction createChart(config, drawChartFabric, drawersArgs) {\n\tconst drawChart = drawChartFabric(drawersArgs);\n\tconst chart = {\n\t\tshouldUpdate: false,\n\n\t\tdestroy: function destroy() {\n\t\t\tdrawChart.destroy();\n\t\t},\n\n\t\tinit: function init() {\n\t\t\tdrawChart.init();\n\t\t},\n\n\t\trender: function render() {\n\t\t\t// console.log('update chart', index);\n\t\t\tchart.shouldUpdate = false;\n\t\t\tconfig.ctx.clearRect(0, 0, config.canvasBounds.width, CANVAS_HEIGHT - CONTROL_HEIGHT);\n\t\t\tdrawChart(SIDES_PADDING, 0, config.canvasBounds.width - SIDES_PADDING2, CANVAS_HEIGHT - CONTROL_HEIGHT);\n\t\t}\n\t};\n\n\treturn chart;\n}\n\n\nfunction Chart(OPTS, data, FABRIC) {\n\tconst {\n\t\tcontainer,\n\t\tindex,\n\t} = OPTS;\n\n\t// Init canvas\n\tlet w, h, normControl;\n\tconst title = data.title || OPTS.title || `Chart #${index + 1}`\n\tconst canvasContainer = createElement(container, 'div', 'chart');\n\tconst header = createHeader(canvasContainer, title, '');\n\tconst canvas = createElement(canvasContainer, 'canvas', 'chart__canvas');\n\n\tconst ctx = canvas.getContext('2d');\n\tconst animator = createAnimator();\n\n\tconst config = {\n\t\tcanvas: canvas,\n\t\tctx: ctx,\n\t\tzoomed: false,\n\t\tindex: index,\n\t\tanimator: animator,\n\t\tcanvasBounds: { left: 0, top: 0 },\n\t\tmouse: null,\n\t\tnormalizeForControl: function normalizeForControl(xPos) {\n\t\t\treturn normControl(xPos);\n\t\t},\n\n\t\tpopup: {},\n\t\tbuttons: null,\n\t\tchart: null,\n\t\tcontrol: null,\n\t\tscaleX: 0,\n\t};\n\n\tconfig.mouse = createMouseForChart(config);\n\tconfig.data = prepareDataset(data, config);\n\tconfig.scaleX = normalize(0, config.data.xAxis.length - 1)(1);\n\tconfig.popup = createPopup(canvasContainer, config);\n\tconst footer = createElement(canvasContainer, 'div', 'chart__footer');\n\n\t// if (config.data.yAxis.items.length > 1) {\n\t\tconfig.buttons = createButtons(footer, config, () => {\n\t\t\tupdateNorms(true);\n\t\t});\n\t// }\n\n\tconst updateNorms = throttleLForceable(\n\t\tfunction updateNorms() {\n\t\t\tconst rStart = config.control.range[0];\n\t\t\tconst rEnd = config.control.range[1];\n\t\t\t\n\t\t\tconst startIndexRaw = rStart * config.data.xAxis.length;\n\t\t\tconst startIndex = startIndexRaw < 0 ? 0 : Math.floor(startIndexRaw);\n\t\t\tconst endIndexRaw = rEnd * config.data.xAxis.length;\n\t\t\tconst endIndex = endIndexRaw > config.data.xAxis.length ? config.data.xAxis.length : Math.ceil(endIndexRaw);\n\t\t\tconfig.data.yAxis.items.forEach(y => y.scaling.updateMinMax(startIndex, endIndex));\n\t\t\theader.setSubtitle(`${config.data.xAxis[startIndex].dateStringTitle} - ${config.data.xAxis[endIndex - 1].dateStringTitle}`)\n\t\t}\n\t, 100);\n\n\tfunction updateBounds() {\n\t\t// console.log('BOUNDS')\n\t\tconst newBounds = canvas.getBoundingClientRect();\n\t\tconst newWidth = newBounds.width * PIXEL_RATIO;\n\t\tconst newHeight = newBounds.height * PIXEL_RATIO;\n\n\t\tconfig.canvasBounds.width = newWidth;\n\t\tconfig.canvasBounds.height = CANVAS_HEIGHT;\n\t\tconfig.canvasBounds.left = newBounds.left;\n\t\tconfig.canvasBounds.right = newBounds.right;\n\t\tconfig.canvasBounds.top = newBounds.top;\n\t\tconfig.canvasBounds.bottom = newBounds.bottom;\n\t\tconfig.canvasBounds.x = newBounds.x;\n\t\tconfig.canvasBounds.y = newBounds.y;\n\n\t\tif (config.canvasBounds.width !== newWidth || config.canvasBounds.height !== newHeight) {\n\t\t\tconfig.chart.shouldUpdate = true;\n\t\t\tconfig.control.shouldUpdate = true;\n\t\t\tnormControl = normalizeMemo(SIDES_PADDING2, config.canvasBounds.width - SIDES_PADDING2);\n\t\t\tcanvas.width = config.canvasBounds.width;\n\t\t\tcanvas.height = CANVAS_HEIGHT;\n\t\t}\n\t}\n\n\tfunction render() {\n\t\tupdateBounds();\n\t\tconst isActiveAnimations = config.animator.updateAnimations();\n\t\tif (isActiveAnimations) config.chart.shouldUpdate = true\n\n\t\tconfig.chart.shouldUpdate && config.chart.render();\n\t\tconfig.control.shouldUpdate && config.control.render();\n\t}\n\n\tconst bak = {};\n\n\tfunction zoomOut() {\n\t\tif (config.zoomed) {\n\t\t\tconfig.popup.hide();\n\t\t\tbak.buttons.mergeState(config.buttons);\n\t\t\tconfig.buttons.destroy();\n\t\t\tconfig.chart.destroy();\n\t\t\tconfig.control.destroy();\n\t\t\tdelete config.chart;\n\t\t\tconst range = [config.control.range[0], config.control.range[1]];\n\t\t\tdelete config.control;\n\n\t\t\tconfig.data = bak.data;\n\t\t\tconfig.scaleX = normalize(0, config.data.xAxis.length - 1)(1);\n\t\t\tconfig.buttons = bak.buttons;\n\t\t\tconfig.chart = bak.chart;\n\t\t\tconfig.control = bak.control;\n\t\t\tconfig.control.animateRange(range, config.control.range);\n\n\n\t\t\tconfig.buttons.init();\n\t\t\tconfig.chart.init();\n\t\t\tconfig.control.init();\n\t\t\tconfig.chart.shouldUpdate = true;\n\t\t\tconfig.control.shouldUpdate = true;\n\t\t\tconfig.zoomed = false;\n\t\t\theader.unfreezeSubtitle();\n\t\t\theader.setTitle(title);\n\t\t\tinit();\n\t\t\treturn;\n\t\t}\n\t}\n\n\tfunction zoomIn(timestamp) {\n\t\tif (!config.data.x_on_zoom) return;\n\t\tconst dataRequested = config.data.x_on_zoom(timestamp);\n\t\tif (!dataRequested) {\n\t\t\tconsole.warn(\"'x_on_zoom' should return promise with data\");\n\t\t} else if (!dataRequested.then) {\n\t\t\tconsole.warn(\"'x_on_zoom' should return promise with data\");\n\t\t} else if (dataRequested.then) {\n\t\t\tdataRequested.then(data => {\n\t\t\t\tconst fabric = fabricByDatasource(data, true);\n\n\t\t\t\tconfig.popup.hide();\n\t\t\t\tconfig.buttons.destroy();\n\t\t\t\tconfig.chart.destroy();\n\t\t\t\tconfig.control.destroy();\n\n\t\t\t\tbak.buttons = config.buttons;\n\t\t\t\tbak.chart = config.chart;\n\t\t\t\tbak.control = config.control;\n\t\t\t\tbak.popup = config.popup;\n\t\t\t\tbak.data = config.data;\n\n\t\t\t\tconfig.data = prepareDataset(data, config);\n\t\t\t\tconfig.scaleX = normalize(0, config.data.xAxis.length - 1)(1);\n\t\t\t\tconfig.buttons = createButtons(footer, config, () => updateNorms(true));\n\t\t\t\tconfig.buttons.mergeState(bak.buttons);\n\t\t\t\tconfig.chart = createChart(config, fabric.drawChartFabric, { ...drawersArgs, config });\n\t\t\t\tconfig.control = createControl(config, fabric.drawControlFabric, { ...drawersArgsControl, config }, () => updateNorms(), {\n\t\t\t\t\trange: [config.control.range[0], config.control.range[1]],\n\t\t\t\t});\n\t\t\t\tconfig.control.animateRange(bak.control.range, [0.4, 0.6]);\n\t\t\t\theader.setSubtitle(dateString(timestamp).dateString);\n\t\t\t\theader.freezeSubtitle();\n\t\t\t\tinit();\n\n\t\t\t\tconfig.chart.shouldUpdate = true;\n\t\t\t\tconfig.control.shouldUpdate = true;\n\t\t\t\tconfig.zoomed = true;\n\t\t\t\theader.setTitleButton('Zoom Out', () => {\n\t\t\t\t\tzoomOut();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tconfig.popup.onClick(zoomIn);\n\n\tconst drawersArgs = { config, normYKey: 'normY' };\n\tconst drawersArgsControl = { config, normYKey: 'normControlY' };\n\n\tconfig.chart = createChart(config, FABRIC.drawChartFabric, drawersArgs);\n\tconfig.control = createControl(config, FABRIC.drawControlFabric, drawersArgsControl, () => updateNorms())\n\n\twindow.addEventListener('resize', updateBounds);\n\n\tfunction init() {\n\t\tconfig.control.updateRange(config.control.range[0], config.control.range[1]);\n\t\tupdateBounds();\n\t\tupdateNorms(true);\n\t}\n\n\tinit();\n\trender();\n\n\treturn {\n\t\trender: render,\n\t\tcontrol: config.control,\n\t\tchart: config.chart,\n\t\tupdate() {\n\t\t\tconfig.chart.shouldUpdate = true;\n\t\t\tconfig.control.shouldUpdate = true;\n\t\t}\n\t};\n}\n\n\nexport default Chart;","import {\n\tCURRENT,\n} from '../Globals';\n\nexport const THEME_DAY = {\n\tbackground: '#FFFFFF',\n\tscrollBackground: '#E2EEF9',\n\tscrollSelector: '#C0D1E1',\n\tgridLines: '#182D3B',\n\ttooltipArrow: '#D2D5D7',\n\tzoomText: '#108BE3',\n};\n\nexport const THEME_NIGHT = {\n\tbackground: '#1B232F',\n\tscrollBackground: '#304259',\n\tscrollSelector: '#56626D',\n\tgridLines: '#FFFFFF',\n\ttooltipArrow: '#D2D5D7',\n\tzoomText: '#48AAF0',\n};\n\nexport function createThemeChanger(onClick) {\n\tconst html = document.querySelector('html');\n\tlet isLight = true;\n\n\tfunction handleChange() {\n\t\tCURRENT.THEME = isLight ? THEME_DAY : THEME_NIGHT;\n\t\tonClick && onClick(isLight);\n\t}\n\n\tdocument.addEventListener('darkmode', () => {\n\t\tconst isDarkMatch = html.className.toLowerCase().split(\" \").indexOf(\"dark\") > -1;\n\t\tisLight = !isDarkMatch;\n\t\thandleChange();\n\t});\n\n\t// handleChange();\n\tdocument.dispatchEvent(new Event('darkmode'));\n\n\treturn {}\n}","import \"./styles/index.scss\";\n\nimport AnimationLoop from \"./Utils/AnimationLoop\";\nimport Chart from \"./Chart\";\n\nimport { createThemeChanger } from \"./UI/Theme\";\nimport { fabricByDatasource } from \"./ChartTypes\";\n\nlet graphsInstances = [];\n\ncreateThemeChanger((isLight) => {\n  graphsInstances.forEach((chart) => chart.update());\n});\n\nfunction initGraphModule() {\n  let index = 0;\n\n  return {\n    render: function Graph(container, chartData, opts = {}) {\n      const graphOpts = {\n        container: container || document.body,\n        index: index++,\n        title: opts.title || undefined,\n      };\n      const fabric = fabricByDatasource(chartData);\n      const graph = Chart(graphOpts, chartData, fabric);\n      AnimationLoop.add(() => {\n        graph.render();\n      });\n      graphsInstances.push(graph);\n      return graph;\n    },\n  };\n}\n\nconst Graph = initGraphModule();\n\nexport default Graph;\n"],"names":["createAnimationLoop","animationHandlers","publicInterface","handler","index","loop","loopTime","i","animationLoop","MONTH_NAMES","DAY_NAMES","PIXEL_RATIO","CONTROL_HEIGHT","DOT_RADIUS","DOT_RADIUS_MUL_2","CANVAS_HEIGHT","SIDES_PADDING","SIDES_PADDING2","PI2","PI1","FONT","AXIS_TEXT_WIDTH","BOTTOM_PADDING","X_AXIS_HEIGHT","X_AXIS_HEIGHT_DIV_2","Y_AXIS_TEXT_PADDING","ONE","TWO","ANIMATION_SPEED","CURRENT","createDispatcher","types","handlers","dispatchers","mouse","type","event","createMouseForChart","config","dispatcher","onMouseDown","e","onMouseMove","onMouseUp","onTouchDown","onTouchMove","Animated","value","duration","onAnimation","fromValue","toValue","AnimationLoop","result","progress","ease","animateObject","animator","object","key","valueFrom","valueTo","onFrame","createAnimator","animations","opts","createAnimation","animation","removeAnimation","updateAnimations","count","isActive","formatNumber","n","short","abs","normalizeMemo","min","max","delta","memo","norm","val","normalize","normalizeAnimated","newMin","throttle","func","limit","inThrottle","args","context","throttleLForceable","force","average","curr","item","uninf","singleMin","set","singleMax","singleMinRange","start","end","singleMaxRange","flatMin","arr","flatMax","flatMinRange","flatMaxRange","zipSum","res","j","DATE_TYPE_HOUR","DATE_TYPE_DAY","DATE_TYPE_WEEK","DATE_TYPES","date","dateString","timestamp","dateType","timezoneOffset","createPercentDefaultHandler","data","resolve","reject","prepareDataset","title","columns","colors","names","percentage","stacked","y_scaled","x_on_zoom","xAxisKey","rawXAxis","rawYAxisList","xDiff","xAxis","el","yAxis","prepareYAxis","rawYs","items","y","yKey","yData","startIndex","endIndex","sharedScaling","scaling_Percentage","scaling_Stacked","scaling_Default","minHeightAnim","maxHeightAnim","rawItems","f","minHeight","maxHeight","updateMinMax","filteredRawItems","err","createElement","parent","elementTag","className","element","createLongPress","button","handlePress","handleLongPress","timeout","dropClick","mouseUp","mouseDown","mouseMove","init","destroy","createPopupHeader","widthArrow","createPopupItem","color","createPopup","container","popup","clickHandlers","currentIndex","changeHtml","createHeader","titleText","subtitleText","header","subtitle","isSubtitleFreezed","onClick","buttonClickHandler","createButtonForAxis","globState","state","longPress","onPress","onLongPress","update","shouldCallUpdateHandler","hide","caller","show","createButtons","globalState","hideAllExcept","hideAll","buttonsWrapper","allButtons","buttons","enabled","oldButtons","Bar","normYKey","ctx","control","chunkScale","draws","prevWidth","shouldBulkRecalculate","shouldRecalculate","calculate","x","width","height","opacity","normY","WIDTH","chunkSize","chunk_2","startBreakpoint","endBreakpoint","X","Y","BAR_HEIGHT","drawBar","activeIndex","isHovered","SIDE_LEFT","SIDE_RIGHT","createMouseDotHandling","paddingLeftSelector","paddingRightSelector","rounding","plus","current","TOUCHED","handleOver","popupBounds","currentPos","paddingLeft","paddingRight","leftOverflow","rightOverflow","moveHandler","downHandler","upHandler","BarDots","h","drawBarDots","YAxis","partsCount","textAlign","drawLine","separateAxis","a","part","partNumber","number","steps","XAxis","forBars","currRaw","step","nextStep","realStep","nextRealStep","breakPoint","currItemWidth","alpha","BarChartDrawer","drawersArgs","drawBarLayer","BarLayerDrawer","calculateActiveBarIndex","BarActivePopup","drawXAxisLayer","XAxisLayerDrawer","__spreadProps","__spreadValues","drawYAxisLayer","YAxisLayerDrawer","drawChart","XS","xRanged","widthRanged","HEIGHT","currentActiveIndex","NONE","DRAG_START","DRAG_END","DRAG_ALL","pipaH","pipaH2","controlWidth","controlWidthMul2","controlWidthDiv2","controlWidthDiv13","controlPipaWidth","controlPipaPos","createControlLayer","OPTS","controlsBounds","mouseMode","oldRange","clickRangeBase","xs","xe","ww","oldWidth","oldX","normOld","diff","newRangeStart","newRangeEnd","clickRangeStart","clickRangeEnd","boundsStart","boundsEnd","updateControlBounds","renderControl","xxxs","ControlsDrawer","barLayers","destroyControl","initControl","drawControl","Line","lineWidth","datas","currOpacity","yh","LineDots","drawLineDots","drawDotsForLines","drawLineLayers","itemsIndex","DualLineChartDrawer","drawLeftYAxisLayer","drawRightYAxisLayer","LineLayerDrawer","calculateLineActivePopupIndex","LineActivePopup","drawYLine","LineChartDrawer","LineActivePopupLayer","lineLayers","Area","RADIUS","centerX","centerY","perc","drawArea","copacity","angleStart","angleEnd","textAngle","textX","textY","AreaChartDrawer","drawAreaLayers","AreaLayerDrawer","itemsStart","itemsDiff","itemsEnd","AreaLine","drawAreaLine","normYM","onePercent","AreaLineActivePopup","drawAreaLineActivePopup","drawAreaLineLayers","AreaLineLayerDrawer","drawAreaLineActiveLayer","AreaLineActiveLayerDrawer","AreaLineControlsDrawer","DualLine","LineControlsDrawer","BarControlsDrawer","AreaLineChartDrawer","AreaCircle","ChartTypes","fabricByDatasource","datasource","isZoom","createControl","drawControlFabric","onRangeUpdate","newRange","scale","createChart","drawChartFabric","chart","Chart","FABRIC","normControl","canvasContainer","canvas","xPos","footer","updateNorms","rStart","rEnd","startIndexRaw","endIndexRaw","updateBounds","newBounds","newWidth","newHeight","render","bak","zoomOut","range","zoomIn","dataRequested","fabric","drawersArgsControl","THEME_DAY","THEME_NIGHT","createThemeChanger","html","isLight","handleChange","graphsInstances","initGraphModule","chartData","graphOpts","graph","Graph"],"mappings":"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"}